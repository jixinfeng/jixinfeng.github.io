<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://jixinfeng.github.io').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="ä¸œç½—è°·ä¹¡">
<meta property="og:url" content="http://jixinfeng.github.io/index.html">
<meta property="og:site_name" content="ä¸œç½—è°·ä¹¡">
<meta property="article:author" content="jx.f">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://jixinfeng.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>ä¸œç½—è°·ä¹¡</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ä¸œç½—è°·ä¹¡</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2020/01/26/spark-one-hot-encoding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/26/spark-one-hot-encoding/" class="post-title-link" itemprop="url">Spark å¾®æ“ä½œä¹‹ One-Hot ç¼–ç </a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-26 15:47:09 / Modified: 23:42:06" itemprop="dateCreated datePublished" datetime="2020-01-26T15:47:09-05:00">2020-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ä¸ºä»€ä¹ˆè¦-One-Hot-ç¼–ç -ï¼ˆ-OHE-ï¼‰"><a href="#ä¸ºä»€ä¹ˆè¦-One-Hot-ç¼–ç -ï¼ˆ-OHE-ï¼‰" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ One-Hot ç¼–ç  ï¼ˆ OHE ï¼‰"></a>ä¸ºä»€ä¹ˆè¦ One-Hot ç¼–ç  ï¼ˆ OHE ï¼‰</h2><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ One-Hot ç¼–ç  ï¼ˆOne-Hot Encodingï¼Œ OHEï¼‰ æ˜¯ä¸€ç§ç»å¸¸ç”¨åˆ°çš„ç‰¹å¾ç¼–ç æ–¹å¼ã€‚å¯¹ä¸€ä¸ªæœ‰ $n$ ä¸ªä¸åŒå¯èƒ½å–å€¼çš„ç‰¹å¾ï¼Œå¯ä»¥å°†å…¶ç¼–ç ä¸ºä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„å‘é‡ã€‚å¯¹äºç¬¬ $i$ ä¸ªå–å€¼ï¼Œä»¤ç¼–ç å‘é‡ç¬¬ $i$ ä½å– 1 ï¼Œå…¶ä½™ä½å– 0 ã€‚è™½ç„¶ä¸€çœ¼æœ›å»è¿™æ ·å’Œç›´æ¥å°†ç‰¹å¾ç¼–ç ä¸º 0 è‡³ $n$ çš„é¡ºåºç¼–ç æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯é¡ºåºç¼–ç åœ¨å¤„ç†æ²¡æœ‰é¡ºåºçš„ç‰¹å¾ï¼ˆå›½å®¶ã€è¯­è¨€ã€ç‰©å“åˆ†ç±»ç­‰ï¼‰æ—¶ä¼šäº§ç”Ÿç‰¹å¾å–å€¼ä¹‹é—´å­˜åœ¨é¡ºåºçš„å‰¯ä½œç”¨ï¼šæ¯”å¦‚ç¼–ç ä¸º 1 å’Œ 2 çš„ç‰¹å¾ä¹‹é—´çš„å…³ç³»ä¼šæ¯”ç¼–ç ä¸º 1 å’Œ 6 çš„ç‰¹å¾æ›´è¿‘ã€‚</p>
<h2 id="PySpark-å’Œ-Scikit-Learn-ä¸­-OHE-çš„åŒºåˆ«"><a href="#PySpark-å’Œ-Scikit-Learn-ä¸­-OHE-çš„åŒºåˆ«" class="headerlink" title="PySpark å’Œ Scikit-Learn ä¸­ OHE çš„åŒºåˆ«"></a>PySpark å’Œ Scikit-Learn ä¸­ OHE çš„åŒºåˆ«</h2><p>åœ¨ Scikit-Learn å’Œ PySpark ä¸­ï¼Œ OHE çš„ç»†èŠ‚å­˜åœ¨ä¸€äº›åŒºåˆ«ï¼Œå¦‚æœå·²ç»ä¹ æƒ¯äº† Scikit-Learn çš„è¾“å‡ºæ ¼å¼ï¼Œåœ¨ç”¨ PySpark æ—¶ä¼šäº§ç”Ÿé¢„æ–™ä¹‹å¤–çš„è¾“å‡ºã€‚åœ¨ Scikit-Learn çš„ <a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.OneHotEncoder.html" target="_blank" rel="noopener" title="OneHotEncoder">OneHotEncoder()</a> ä¸­ï¼Œæ¯ä¸€ä¸ªç‹¬ç«‹çš„ç‰¹å¾ä¼šåœ¨è¾“å‡ºä¸­å•ç‹¬è¡¨è¾¾ä¸º DataFrame çš„ä¸€åˆ—ã€‚ä½†æ˜¯åœ¨ PySpark çš„ <a href="https://spark.apache.org/docs/latest/ml-features#onehotencoderestimator" target="_blank" rel="noopener" title="OneHotEncoderEstimator">OneHotEncoderEstimator</a> ä¸­ï¼Œç¼–ç è¾“å‡ºçš„åˆ™æ˜¯ç¨€ç–å‘é‡ <a href="https://spark.apache.org/docs/latest/api/python/pyspark.ml.html?highlight=sparsevector#pyspark.ml.linalg.SparseVector" target="_blank" rel="noopener" title="SparseVector">SparseVector</a> ï¼Œ å¹¶ä¸”å¯¹äºæœ‰ $n$ ä¸ªå€¼çš„ç‰¹å¾ï¼Œé»˜è®¤è¾“å‡ºçš„å‘é‡ç»´åº¦åªæœ‰ $n-1$ ï¼Œå¹¶ä¸”æœ€åä¸€ä¸ªç‰¹å¾ä¼šè¢«ç¼–ç ä¸ºå…¨é›¶çš„å‘é‡ã€‚</p>
<p>å¦å¤–ï¼Œ PySpark çš„ OneHotEncoderEstimator å¯¹éæ•°å€¼ç‰¹å¾åˆ—è¿›è¡Œç¼–ç å‰ï¼Œéœ€è¦å…ˆé€šè¿‡ <a href="https://spark.apache.org/docs/latest/api/python/pyspark.ml.html?highlight=stringindexer#pyspark.ml.feature.StringIndexer" target="_blank" rel="noopener" title="StringIndexer">StringIndexer</a> è¿›è¡Œé¡ºåºç¼–ç ã€‚</p>
<h2 id="ä¸¾ä¸ªğŸŒ°"><a href="#ä¸¾ä¸ªğŸŒ°" class="headerlink" title="ä¸¾ä¸ªğŸŒ°"></a>ä¸¾ä¸ªğŸŒ°</h2><p>ç”¨ä¸€ä¸ªéšæœºç”Ÿæˆçš„æ•°æ®ä¸ºä¾‹ï¼Œè¿™ä¸ªè®­ç»ƒæ•°æ®ä¿å­˜äº†å‡ ä¸ªå‘˜å·¥çš„å§“åã€éƒ¨é—¨ã€èŒä½ã€å·¥ä½œå¹´æ•°ã€å·¥èµ„ä»¥åŠä¼šè¯´çš„è¯­è¨€ã€‚æˆ‘ä»¬å¸Œæœ›å¯¹éƒ¨é—¨å’Œå²—ä½è¿›è¡Œ OHE ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+---+-------+----------+--------+-----+------+---------------------------+</span><br><span class="line">|id |name   |department|title   |years|salary|language                   |</span><br><span class="line">+---+-------+----------+--------+-----+------+---------------------------+</span><br><span class="line">|0  |Arche  |IT        |Engineer|2    |65000 |[English, Spanish]         |</span><br><span class="line">|1  |Beth   |Purchase  |Manager |5    |100000|[English, French, Spanish] |</span><br><span class="line">|2  |Carl   |Marketing |Intern  |1    |60000 |[English, Chinese]         |</span><br><span class="line">|3  |Dorian |Marketing |Manager |8    |125000|[English, French, Japanese]|</span><br><span class="line">|4  |Escher |IT        |Manager |6    |10000 |[English]                  |</span><br><span class="line">|5  |Faridah|IT        |Engineer|7    |80000 |[Chinese, Japanese]        |</span><br><span class="line">|6  |Gustav |Marketing |Engineer|2    |75000 |[Spanish, Russian]         |</span><br><span class="line">+---+-------+----------+--------+-----+------+---------------------------+</span><br></pre></td></tr></table></figure>

<p>åŒæ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ªå†…å®¹ç¨æœ‰ä¸åŒçš„æµ‹è¯•æ•°æ®ç”¨äºæµ‹è¯•ç¼–ç å™¨åœ¨é¢å¯¹æ–°æ•°æ®å’Œç©ºæ•°æ®æ—¶çš„è¡Œä¸ºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+---+-------+----------+----------+-----+------+---------------------------------+</span><br><span class="line">|id |name   |department|title     |years|salary|language                         |</span><br><span class="line">+---+-------+----------+----------+-----+------+---------------------------------+</span><br><span class="line">|0  |Arche  |IT        |Engineer  |4    |70000 |[English, Spanish, Korean]       |</span><br><span class="line">|1  |Beth   |Purchase  |Manager   |6    |110000|[English, French, Spanish, Hindi]|</span><br><span class="line">|2  |Carl   |Marketing |Intern    |2    |65000 |[English, Chinese, German]       |</span><br><span class="line">|3  |Dorian |Marketing |Manager   |9    |130000|[English, French, Japanese]      |</span><br><span class="line">|4  |Escher |IT        |Manager   |7    |50000 |[English, Thai]                  |</span><br><span class="line">|5  |Faridah|IT        |null      |8    |90000 |[Chinese, Japanese]              |</span><br><span class="line">|6  |Gustav |null      |Researcher|3    |80000 |[Ukrainian, Vietnamese]          |</span><br><span class="line">+---+-------+----------+----------+-----+------+---------------------------------+</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬ä¸€æ¬¡å°è¯•ï¼šPySpark-çš„é»˜è®¤è¡Œä¸º"><a href="#ç¬¬ä¸€æ¬¡å°è¯•ï¼šPySpark-çš„é»˜è®¤è¡Œä¸º" class="headerlink" title="ç¬¬ä¸€æ¬¡å°è¯•ï¼šPySpark çš„é»˜è®¤è¡Œä¸º"></a>ç¬¬ä¸€æ¬¡å°è¯•ï¼šPySpark çš„é»˜è®¤è¡Œä¸º</h3><p>å¦‚æœåœ¨åˆå§‹åŒ– <code>StringIndexer</code> çš„æ—¶å€™é‡‡ç”¨é»˜è®¤å‚æ•°ï¼ŒåŸå§‹ç‰¹å¾åˆ—ä¸º <code>department</code> ï¼Œ <code>StringIndexer</code> è¾“å‡ºä¸º <code>department_idx</code> ï¼Œ <code>OneHotEncoderEstimator</code> è¾“å‡ºä¸º <code>department_vec</code> ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">si_department = StringIndexer(</span><br><span class="line">  inputCol=<span class="string">"department"</span>,</span><br><span class="line">  outputCol=<span class="string">"department_idx"</span>,</span><br><span class="line"><span class="comment">#   handleInvalid="error"</span></span><br><span class="line">)</span><br><span class="line">si_title = StringIndexer(</span><br><span class="line">  inputCol=<span class="string">"title"</span>,</span><br><span class="line">  outputCol=<span class="string">"title_idx"</span>,</span><br><span class="line"><span class="comment">#   handleInvalid="error"</span></span><br><span class="line">)</span><br><span class="line">ohe = OneHotEncoderEstimator(</span><br><span class="line">  inputCols=[si_department.getOutputCol(), si_title.getOutputCol()], </span><br><span class="line">  outputCols=[<span class="string">"department_vec"</span>, <span class="string">"title_vec"</span>]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºçš„è®­ç»ƒæ•°æ®ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ç¼–ç å‘é‡çš„é•¿åº¦éƒ½æ˜¯ 2 ï¼ˆæ¯”ç‰¹å¾å…ƒç´ æ•°å°‘ 1ï¼‰å¹¶ä¸”æœ€åä¸€ä¸ªå…ƒç´ è¢«ç¼–ç æˆäº†é›¶å‘é‡ï¼Œå³ç©ºç¨€ç–å‘é‡ã€‚åŒæ—¶ï¼Œç”±äº <code>handleInvalid</code> è®¾ç½®çš„æ˜¯ <code>error</code> ï¼Œç¼–ç å™¨åœ¨é‡åˆ°åŒ…å«æœªçŸ¥/ç©ºæ•°æ®çš„æµ‹è¯•æ•°æ®ç›´æ¥æŠ¥é”™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br><span class="line">|id |name   |department|department_idx|department_vec|title   |title_idx|title_vec    |</span><br><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br><span class="line">|0  |Arche  |IT        |0.0           |(2,[0],[1.0]) |Engineer|1.0      |(2,[1],[1.0])|</span><br><span class="line">|1  |Beth   |Purchase  |2.0           |(2,[],[])     |Manager |0.0      |(2,[0],[1.0])|</span><br><span class="line">|2  |Carl   |Marketing |1.0           |(2,[1],[1.0]) |Intern  |2.0      |(2,[],[])    |</span><br><span class="line">|3  |Dorian |Marketing |1.0           |(2,[1],[1.0]) |Manager |0.0      |(2,[0],[1.0])|</span><br><span class="line">|4  |Escher |IT        |0.0           |(2,[0],[1.0]) |Manager |0.0      |(2,[0],[1.0])|</span><br><span class="line">|5  |Faridah|IT        |0.0           |(2,[0],[1.0]) |Engineer|1.0      |(2,[1],[1.0])|</span><br><span class="line">|6  |Gustav |Marketing |1.0           |(2,[1],[1.0]) |Engineer|1.0      |(2,[1],[1.0])|</span><br><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬äºŒæ¬¡å°è¯•ï¼šä¿ç•™æœªçŸ¥æ•°æ®"><a href="#ç¬¬äºŒæ¬¡å°è¯•ï¼šä¿ç•™æœªçŸ¥æ•°æ®" class="headerlink" title="ç¬¬äºŒæ¬¡å°è¯•ï¼šä¿ç•™æœªçŸ¥æ•°æ®"></a>ç¬¬äºŒæ¬¡å°è¯•ï¼šä¿ç•™æœªçŸ¥æ•°æ®</h3><p>ä»¥éƒ¨é—¨ç‰¹å¾ä¸ºä¾‹ï¼Œå½“åˆå§‹åŒ– <code>StringIndexer</code> æ—¶è®¾ç½® <code>handleInvalid=&quot;keep&quot;</code> æ—¶ï¼Œä¸€ä¸ªå•ç‹¬çš„æœ€é«˜ç¼–ç ä¼šä¿ç•™ç»™æœªçŸ¥æ•°æ®ã€‚å³å½“æŸä¸€ç‰¹å¾æœ‰$n$ ä¸ªä¸åŒæ•°å€¼æ—¶ï¼Œ $0$ è‡³ $(n-1)$ ä¼šä¿ç•™ç»™å·²çŸ¥ç‰¹å¾ï¼Œ $n$ ä¼šä¿ç•™ç»™æœªçŸ¥ç‰¹å¾ã€‚å½“ <code>OneHotEncoderEstimator</code> è¿›è¡Œç¼–ç æ—¶ï¼ŒæœªçŸ¥ç‰¹å¾åˆ™è¢«åˆ†é…ç»™äº†ç©ºå‘é‡ï¼Œå³è¡¨ä¸­çš„ <code>(3,[],[])</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br><span class="line">|id |name   |department|department_idx|department_vec|title   |title_idx|title_vec    |</span><br><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br><span class="line">|0  |Arche  |IT        |0.0           |(3,[0],[1.0]) |Engineer|1.0      |(3,[1],[1.0])|</span><br><span class="line">|1  |Beth   |Purchase  |2.0           |(3,[2],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">|2  |Carl   |Marketing |1.0           |(3,[1],[1.0]) |Intern  |2.0      |(3,[2],[1.0])|</span><br><span class="line">|3  |Dorian |Marketing |1.0           |(3,[1],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">|4  |Escher |IT        |0.0           |(3,[0],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">|5  |Faridah|IT        |0.0           |(3,[0],[1.0]) |Engineer|1.0      |(3,[1],[1.0])|</span><br><span class="line">|6  |Gustav |Marketing |1.0           |(3,[1],[1.0]) |Engineer|1.0      |(3,[1],[1.0])|</span><br><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+---+-------+----------+--------------+--------------+----------+---------+-------------+</span><br><span class="line">|id |name   |department|department_idx|department_vec|title     |title_idx|title_vec    |</span><br><span class="line">+---+-------+----------+--------------+--------------+----------+---------+-------------+</span><br><span class="line">|0  |Arche  |IT        |0.0           |(3,[0],[1.0]) |Engineer  |1.0      |(3,[1],[1.0])|</span><br><span class="line">|1  |Beth   |Purchase  |2.0           |(3,[2],[1.0]) |Manager   |0.0      |(3,[0],[1.0])|</span><br><span class="line">|2  |Carl   |Marketing |1.0           |(3,[1],[1.0]) |Intern    |2.0      |(3,[2],[1.0])|</span><br><span class="line">|3  |Dorian |Marketing |1.0           |(3,[1],[1.0]) |Manager   |0.0      |(3,[0],[1.0])|</span><br><span class="line">|4  |Escher |IT        |0.0           |(3,[0],[1.0]) |Manager   |0.0      |(3,[0],[1.0])|</span><br><span class="line">|5  |Faridah|IT        |0.0           |(3,[0],[1.0]) |null      |3.0      |(3,[],[])    |</span><br><span class="line">|6  |Gustav |null      |3.0           |(3,[],[])     |Researcher|3.0      |(3,[],[])    |</span><br><span class="line">+---+-------+----------+--------------+--------------+----------+---------+-------------+</span><br></pre></td></tr></table></figure>

<h3 id="ç¬¬ä¸‰æ¬¡å°è¯•ï¼šä¸¢å¼ƒæœªçŸ¥æ•°æ®"><a href="#ç¬¬ä¸‰æ¬¡å°è¯•ï¼šä¸¢å¼ƒæœªçŸ¥æ•°æ®" class="headerlink" title="ç¬¬ä¸‰æ¬¡å°è¯•ï¼šä¸¢å¼ƒæœªçŸ¥æ•°æ®"></a>ç¬¬ä¸‰æ¬¡å°è¯•ï¼šä¸¢å¼ƒæœªçŸ¥æ•°æ®</h3><p>å½“åˆå§‹åŒ– <code>StringIndexer</code> æ—¶è®¾ç½® <code>handleInvalid=&quot;skip&quot;</code> æ—¶ï¼ŒåŒ…å«æœªçŸ¥æ•°æ®çš„è¡Œä¼šè¢«è·³è¿‡ï¼Œå³ä»è¾“å‡ºæ•°æ®ä¸­ä¸¢å¼ƒã€‚ä½†ç”±äºè¿™æ ·ä¸€æ¥ï¼Œæ²¡æœ‰å¤šä½™çš„ä½ç•™ç»™æœªçŸ¥æ•°æ®ï¼Œ <code>OneHotEncoderEstimator</code> çš„è¾“å‡ºè¿˜æ˜¯ä¼šå°‘ä¸€ä½ã€‚è¿™æ—¶å°±éœ€è¦ä»¤ <code>OneHotEncoderEstimator</code>çš„ <code>handleInvalid=&quot;keep&quot;</code>ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°é¢„æµ‹æ•°æ®çš„ç¼–ç è¾“å‡ºåªå‰©ä¸‹äº† 4 è¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">si_department = StringIndexer(</span><br><span class="line">  inputCol=<span class="string">"department"</span>,</span><br><span class="line">  outputCol=<span class="string">"department_idx"</span>,</span><br><span class="line">  handleInvalid=<span class="string">"skip"</span></span><br><span class="line">)</span><br><span class="line">si_title = StringIndexer(</span><br><span class="line">  inputCol=<span class="string">"title"</span>,</span><br><span class="line">  outputCol=<span class="string">"title_idx"</span>,</span><br><span class="line">  handleInvalid=<span class="string">"skip"</span></span><br><span class="line">)</span><br><span class="line">ohe = OneHotEncoderEstimator(</span><br><span class="line">  inputCols=[si_department.getOutputCol(), si_title.getOutputCol()], </span><br><span class="line">  outputCols=[<span class="string">"department_vec"</span>, <span class="string">"title_vec"</span>],</span><br><span class="line">  handleInvalid=<span class="string">"keep"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br><span class="line">|id |name   |department|department_idx|department_vec|title   |title_idx|title_vec    |</span><br><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br><span class="line">|0  |Arche  |IT        |0.0           |(3,[0],[1.0]) |Engineer|1.0      |(3,[1],[1.0])|</span><br><span class="line">|1  |Beth   |Purchase  |2.0           |(3,[2],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">|2  |Carl   |Marketing |1.0           |(3,[1],[1.0]) |Intern  |2.0      |(3,[2],[1.0])|</span><br><span class="line">|3  |Dorian |Marketing |1.0           |(3,[1],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">|4  |Escher |IT        |0.0           |(3,[0],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">|5  |Faridah|IT        |0.0           |(3,[0],[1.0]) |Engineer|1.0      |(3,[1],[1.0])|</span><br><span class="line">|6  |Gustav |Marketing |1.0           |(3,[1],[1.0]) |Engineer|1.0      |(3,[1],[1.0])|</span><br><span class="line">+---+-------+----------+--------------+--------------+--------+---------+-------------+</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+---+------+----------+--------------+--------------+--------+---------+-------------+</span><br><span class="line">|id |name  |department|department_idx|department_vec|title   |title_idx|title_vec    |</span><br><span class="line">+---+------+----------+--------------+--------------+--------+---------+-------------+</span><br><span class="line">|0  |Arche |IT        |0.0           |(3,[0],[1.0]) |Engineer|1.0      |(3,[1],[1.0])|</span><br><span class="line">|1  |Beth  |Purchase  |2.0           |(3,[2],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">|2  |Carl  |Marketing |1.0           |(3,[1],[1.0]) |Intern  |2.0      |(3,[2],[1.0])|</span><br><span class="line">|3  |Dorian|Marketing |1.0           |(3,[1],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">|4  |Escher|IT        |0.0           |(3,[0],[1.0]) |Manager |0.0      |(3,[0],[1.0])|</span><br><span class="line">+---+------+----------+--------------+--------------+--------+---------+-------------+</span><br></pre></td></tr></table></figure>

<h2 id="åç»­æ“ä½œ"><a href="#åç»­æ“ä½œ" class="headerlink" title="åç»­æ“ä½œ"></a>åç»­æ“ä½œ</h2><p>è¿›è¡Œ One-Hot ç¼–ç ä¹‹åçš„ç‰¹å¾å¯èƒ½è¿˜éœ€è¦åç»­æ“ä½œã€‚æ¯”å¦‚ PySpark çš„æœºå™¨å­¦ä¹ æ¨¡å‹åªæ”¯æŒä¸€æ•´ä¸ªå‘é‡çš„è¾“å…¥ï¼Œè¿™å°±éœ€è¦å°†ç¼–ç è¾“å‡ºå’Œå…¶ä»–ç‰¹å¾ç»„åˆèµ·æ¥ã€‚æœ‰æ—¶å€™è¿˜éœ€è¦è¾“å‡ºæ•°æ®å…·æœ‰å’Œ Scikit-Learn ä¸€æ ·çš„æ ¼å¼ï¼Œå³æ¯ä¸ªå‘é‡çš„ç»´åº¦å•ç‹¬å­˜ä¸ºä¸€åˆ—ã€‚è¿™ç¯‡æ–‡ç« å°±æš‚æ—¶ä¸æ¶‰åŠäº†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2018/09/30/Discrete-Optimization-Note-6-VRP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/30/Discrete-Optimization-Note-6-VRP/" class="post-title-link" itemprop="url">Discrete Optimization å­¦ä¹ ç¬”è®° (6) è½¦è¾†è·¯å¾„é—®é¢˜</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-30 00:43:29" itemprop="dateCreated datePublished" datetime="2018-09-30T00:43:29-04:00">2018-09-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-07 00:00:32" itemprop="dateModified" datetime="2020-01-07T00:00:32-05:00">2020-01-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>è½¦è¾†è·¯å¾„é—®é¢˜åŒæ ·æ˜¯ä¸€ä¸ªå’Œå®é™…ç”Ÿæ´»éå¸¸æ¥è¿‘çš„é—®é¢˜ã€‚é—®é¢˜è®¾å®šä¸­åŒ…å« $M$ ä¸ªå®¢æˆ·ï¼Œæ¯ä¸ªå®¢æˆ·æœ‰éœ€æ±‚ $d_i$ å’Œæ‰€åœ¨çš„ä½ç½® $(x, y)$ ã€‚ä½äºèµ·ç‚¹çš„ä»“åº“å¯ä»¥æ´¾å‡º $N$ è¾†é€è´§è½¦ï¼Œæ¯è¾†è½¦æœ‰æœ€å¤§é€è´§å®¹é‡ $C$ ï¼Œè½¦è¾†åŸºç¡€æˆæœ¬ä¸º $S$ï¼Œä» a ç‚¹å¼€è½¦åˆ° b ç‚¹çš„æˆæœ¬å’Œè·ç¦»æˆæ­£æ¯”ã€‚è½¦è¾†è¦è¦†ç›–æ‰€æœ‰å®¢æˆ·çš„éœ€æ±‚ï¼Œä¸é‡ä¸æ¼ï¼Œå¹¶ä¸”ä¼˜åŒ–ç›®æ ‡ä¸ºæ±‚æœ€å°‘é€è´§æˆæœ¬ã€éœ€è¦çš„é€è´§è½¦è¾†æ•°é‡ $N$ï¼Œä»¥åŠæ¯è¾†è½¦çš„è·¯å¾„ã€‚</p>
<h2 id="å±€éƒ¨æœç´¢"><a href="#å±€éƒ¨æœç´¢" class="headerlink" title="å±€éƒ¨æœç´¢"></a>å±€éƒ¨æœç´¢</h2><p>ç”±äºè½¦è¾†è·¯å¾„é—®é¢˜å˜é‡å¤ªå¤šï¼Œæ€»è½¦è¾†æ•°ã€æ¯è¾†è½¦è´Ÿè´£çš„å®¢æˆ·ä»¥åŠå®¢æˆ·çš„é¡ºåºå‡å¯ä»¥è°ƒæ•´ï¼Œå› æ­¤å³æ—¶é€šè¿‡æ„å»ºæ•´æ•°è§„åˆ’çš„æ ‡å‡†å½¢å¼å¹¶é€šè¿‡å·¥å…·åŒ…æ±‚è§£ï¼Œæ•ˆç‡ä¹Ÿä¸ä¼šå¤ªé«˜ã€‚ä¸ºäº†å®Œæˆä½œä¸šï¼Œè¿™é‡Œæˆ‘ä»¬åªé‡‡ç”¨å±€éƒ¨æœç´¢çš„æ–¹å¼è§£å†³é—®é¢˜ã€‚</p>
<p>å±€éƒ¨æœç´¢çš„èµ„æ–™æœ‰å¾ˆå¤šï¼Œ<a href="https://www.researchgate.net/publication/318284891_A_PATH-EXCHANGE-TYPE_LOCAL_SEARCH_ALGORITHM_FOR_VEHICLE_ROUTING_AND_ITS_EFFICIENT_SEARCH_STRATEGY" target="_blank" rel="noopener" title="VRP Paper">è¿™ä¸€ç¯‡æ–‡ç« </a>å’Œæˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜éå¸¸å»åˆï¼Œå› æ­¤æˆ‘ä»¬å°è¯•å¤ç°æ–‡ç« ä¸­è®¾è®¡çš„æœç´¢æ–¹æ³•æ±‚è§£é—®é¢˜ã€‚</p>
<p>ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€äº›æœ¯è¯­ï¼š</p>
<ul>
<li>ä¸€è¾†è½¦ä»å®¢æˆ· a ç›´æ¥è¡Œé©¶åˆ°å®¢æˆ· b æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™è¾†è½¦é©¶è¿‡äº†ä¸€æ¡â€œè¾¹â€ ï¼ˆ edge ï¼‰</li>
<li>ä¸€è¾†è½¦è¿ç»­é©¶è¿‡å¤šä¸ªå®¢æˆ·ï¼Œå³é©¶è¿‡å¤šæ¡é¦–å°¾ç›¸è¿çš„è¾¹æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™è¾†è½¦é©¶è¿‡äº†ä¸€æ®µâ€œè·¯å¾„â€ ï¼ˆ path ï¼‰</li>
<li>ä¸€è¾†è½¦ä»èµ·ç‚¹å‡ºå‘ï¼Œé€”å¾„æ‰€æœ‰åˆ†é…ç»™å®ƒçš„å®¢æˆ·ï¼Œæœ€ç»ˆå›åˆ°èµ·ç‚¹æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™è¾†è½¦é©¶è¿‡äº†ä¸€æ¡â€œå›è·¯â€ ( route )</li>
</ul>
<p>æœ‰äº†è¿™äº›æœ¯è¯­ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰å››ç§åŸºæœ¬çš„å±€éƒ¨æœç´¢æ¨¡å¼äº†ã€‚</p>
<h3 id="è·¯å¾„å¹³ç§»-Shift"><a href="#è·¯å¾„å¹³ç§»-Shift" class="headerlink" title="è·¯å¾„å¹³ç§» Shift"></a>è·¯å¾„å¹³ç§» Shift</h3><p><img src="/images/vrp-shift.png" alt="VRP è·¯å¾„å¹³ç§»" title="TSP 2-opt ä¼˜åŒ–æ€è·¯"></p>
<p>è·¯å¾„å¹³ç§»ï¼Œå°±æ˜¯å°†ä¸€æ¡å›è·¯ä¸­çš„éƒ¨åˆ†è·¯å¾„ç§»åŠ¨åˆ°å¦ä¸€æ¡å›è·¯ä¸­çš„æŸä¸ªä½ç½®ï¼Œå¯ä»¥æ­£æ¥ä¹Ÿå¯ä»¥åæ¥ã€‚å¦‚æœåœ¨ä¸è¿åé™åˆ¶æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®²ä¸€æ•´æ¡å›è·¯å¹³ç§»åˆ°å¦ä¸€å›è·¯ä¸­ï¼Œé‚£ä¹Ÿå°±ç›¸å½“äºåˆå¹¶äº†ä¸¤æ¡å›è·¯ï¼Œå‡å°‘äº†ä¸€è¾†è½¦çš„éœ€æ±‚ã€‚</p>
<h3 id="è·¯å¾„äº¤æ¢-Interchange"><a href="#è·¯å¾„äº¤æ¢-Interchange" class="headerlink" title="è·¯å¾„äº¤æ¢ Interchange"></a>è·¯å¾„äº¤æ¢ Interchange</h3><p><img src="/images/vrp-interchange.png" alt="VRP è·¯å¾„äº¤æ¢" title="TSP 2-opt ä¼˜åŒ–æ€è·¯"></p>
<p>è·¯å¾„äº¤æ¢ï¼Œä¸å¹³ç§»ç±»ä¼¼ï¼Œå°±æ˜¯äº¤æ¢ä¸¤ä¸ªå›è·¯ä¸­å„è‡ªçš„ä¸¤ç«¯è·¯å¾„ï¼Œç”±äºä¸¤è·¯å¾„å‡å¯ä»¥åœ¨äº¤æ¢ä¹‹åæ­£æ¥åæ¥ï¼Œå› æ­¤ä¸€æ¬¡äº¤æ¢å¯ä»¥äº§ç”Ÿå››ç§å¯èƒ½çš„ç»“æœã€‚</p>
<h3 id="å›è·¯å†…æ¢è¾¹-2-exchange"><a href="#å›è·¯å†…æ¢è¾¹-2-exchange" class="headerlink" title="å›è·¯å†…æ¢è¾¹ 2-exchange"></a>å›è·¯å†…æ¢è¾¹ 2-exchange</h3><p><img src="/images/vrp-exchange.png" alt="VRP å›è·¯å†…æ¢è¾¹" title="TSP 2-opt ä¼˜åŒ–æ€è·¯"></p>
<p>å›è·¯å†…æ¢è¾¹ï¼Œå’Œ TSP çš„ 2-opt æ“ä½œç›¸åŒï¼Œå³é‡æ–°è¿æ¥ä¸€æ¡å›è·¯å†…ä¸¤æ¡è¾¹ï¼Œè¿›è¡Œä¸€ä¸ªâ€œæ‹§éº»èŠ±â€çš„æ“ä½œã€‚</p>
<h3 id="å›è·¯é—´é¦–å°¾é‡ç»„-Ladder"><a href="#å›è·¯é—´é¦–å°¾é‡ç»„-Ladder" class="headerlink" title="å›è·¯é—´é¦–å°¾é‡ç»„ Ladder"></a>å›è·¯é—´é¦–å°¾é‡ç»„ Ladder</h3><p><img src="/images/vrp-ladder.png" alt="VRP å›è·¯é—´é¦–å°¾é‡ç»„" title="TSP 2-opt ä¼˜åŒ–æ€è·¯"></p>
<p>å›è·¯é—´é¦–å°¾é‡ç»„ï¼Œå°±æ˜¯åœ¨ä¸¤æ¡å›è·¯ä¸­å„è‡ªè®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œå°†ä¸¤æ¡å›è·¯æ–­ç‚¹ä¸¤ä¾§çš„è·¯å¾„é‡æ–°è¿æ¥å½¢æˆä¸¤æ¡æ–°å›è·¯ã€‚æ ¹æ®é¦–å°¾è¿æ¥çš„æ–¹å¼ä¸åŒï¼Œå¯ä»¥äº§ç”Ÿä¸¤ç§ç»“æœã€‚</p>
<h3 id="æœç´¢åˆå§‹è§£"><a href="#æœç´¢åˆå§‹è§£" class="headerlink" title="æœç´¢åˆå§‹è§£"></a>æœç´¢åˆå§‹è§£</h3><p>å±€éƒ¨æœç´¢åœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œåªèƒ½åœ¨æœ‰æ•ˆè§£é—´è¿›è¡Œæœç´¢å¹¶ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼Œå› æ­¤éœ€è¦æ‰¾åˆ°ä¸€ä¸ªæ•ˆæœä¸æ˜¯å¾ˆå¥½ä½†æ˜¯å¯è¡Œçš„è§£ä½œä¸ºæœç´¢çš„èµ·ç‚¹ã€‚ç”±äºè½¦è¾†è·¯å¾„é—®é¢˜å˜é‡å¤šã€å…³è”æ€§å¼ºã€é™åˆ¶æ¡ä»¶å¤šï¼Œå› æ­¤å¾ˆéš¾ç›´æ¥å¾—åˆ°ä¸€ç»„å¯è¡Œè§£ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨è´ªå¿ƒæ³•å¾—åˆ°ç¬¬ä¸€ç»„å¯è¡Œè§£å¹¶å¼€å§‹æœç´¢ã€‚</p>
<p>æœç´¢çš„è¿‡ç¨‹æ˜¯ï¼šæ¯å½“è¿˜æœ‰é¡¾å®¢æ²¡æœ‰è¦†ç›–åˆ°ä½†å½“å‰æ²¡æœ‰è½¦è¾†æœ‰è¶³å¤Ÿå®¹é‡æ—¶ï¼Œå¢åŠ ä¸€è¾†è´§è½¦ï¼Œä»ç›®å‰æ²¡æœ‰è¢«è¦†ç›–çš„éœ€æ±‚æœ€å°çš„å®¢æˆ·å¼€å§‹é€è´§ï¼Œç›´è‡³å®¹é‡ä¸è¶³ã€‚å¦‚æ­¤æ“ä½œç›´è‡³æ‰€æœ‰å®¢æˆ·éƒ½è¢«è¦†ç›–ã€‚è¿™æ ·å¯ä»¥ä¿è¯æ¯ä¸ªå®¢æˆ·è¦†ç›–ä¸é‡ä¸æ¼ï¼Œå¹¶ä¸”è½¦è¾†å®¹é‡éƒ½è¶³å¤Ÿã€‚</p>
<p>æ‰¾åˆ°åˆå§‹è§£ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹è¿›è¡Œå±€éƒ¨æœç´¢ï¼Œç›´è‡³è¾¾åˆ°æœ€å¤§æœç´¢æ—¶é—´ã€æœ€å¤§æœç´¢æ¬¡æ•°æˆ–è€…æ— æ³•é€šè¿‡å±€éƒ¨æœç´¢æ‰¾åˆ°æ›´ä¼˜è§£ä¸ºæ­¢ã€‚æ±‚è§£ä»£ç åœ¨<a href="https://github.com/jixinfeng/discopt-soln/blob/master/week-07-vrp/" target="_blank" rel="noopener" title="VRP Solution">è¿™é‡Œ</a>ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2018/09/20/Discrete-Optimization-Note-5-Facility-Location/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/20/Discrete-Optimization-Note-5-Facility-Location/" class="post-title-link" itemprop="url">Discrete Optimization å­¦ä¹ ç¬”è®° (5) è®¾æ–½é€‰å€é—®é¢˜</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-20 22:43:22" itemprop="dateCreated datePublished" datetime="2018-09-20T22:43:22-04:00">2018-09-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-07 00:07:52" itemprop="dateModified" datetime="2020-01-07T00:07:52-05:00">2020-01-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p><a href="https://en.wikipedia.org/wiki/Facility_location_problem" target="_blank" rel="noopener" title="Facility Location Problem Wiki Page">è®¾æ–½é€‰å€é—®é¢˜</a>æ˜¯ä¸€ä¸ªæ¯”è¾ƒå…·æœ‰ç°å®æ„ä¹‰çš„ä¼˜åŒ–é—®é¢˜ã€‚é—®é¢˜å¯ä»¥é€šè¿‡ $N$ ä¸ªå¤‡é€‰çš„ä¾›åº”è®¾æ–½ä½ç½®å’Œ $M$ ä¸ªå®¢æˆ·æ¥æè¿°ã€‚é€‰å®šä¸€ä¸ªå€™é€‰ä½ç½®å»ºç«‹ä¾›åº”è®¾æ–½ $f$ çš„æ—¶å€™éœ€è¦ä»˜å‡º $s_f$ çš„å»ºè®¾æˆæœ¬ï¼Œå¹¶ä¸”è®¾æ–½çš„æœ€å¤§ä¾›åº”é‡ä¸èƒ½è¶…è¿‡ $cap_f$ ï¼›ä¸ä¹‹å¯¹åº”æ¯ä¸ªå®¢æˆ· $c$ å‡æœ‰ä¸€ä¸ªéœ€æ±‚å€¼ $d_c$ éœ€è¦è¢«æ»¡è¶³ï¼›è®¾æ–½ $f$ å’Œå®¢æˆ· $c$ ä¹‹é—´çš„è·ç¦»ä¸ºä¸¤è€…ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦» $d(f, c)$ ï¼Œé€è´§æˆæœ¬ç­‰äºé€è´§è·ç¦»ã€‚é¢˜ç›®è¦æ±‚æ¯ä¸ªå®¢æˆ·çš„éœ€æ±‚å¿…é¡»æ»¡è¶³ï¼Œä¸”è‡³å¤šåªèƒ½æ¥æ”¶ä¸€ä¸ªä¾›åº”è®¾æ–½çš„é€è´§ï¼ŒåŒæ—¶æ‰€æœ‰è®¾æ–½å‡ä¸èƒ½è¶…è´Ÿè·è¿è½¬ï¼Œå³ä¾›åº”é‡ä¸åº”è¶…è¿‡è®¾æ–½å®¹é‡ã€‚ä¼˜åŒ–ç›®æ ‡æ˜¯åœ¨æ»¡è¶³æ‰€æœ‰æ¡ä»¶çš„æƒ…å†µä¸‹æ±‚å‡ºæˆæœ¬æœ€ä½çš„è®¾æ–½é€‰å€ä»¥åŠé€è´§å®‰æ’ã€‚</p>
<h2 id="æ•´æ•°è§„åˆ’"><a href="#æ•´æ•°è§„åˆ’" class="headerlink" title="æ•´æ•°è§„åˆ’"></a>æ•´æ•°è§„åˆ’</h2><p>æ­¤é¢˜ç›´æ¥é€šè¿‡æ•´æ•°è§„åˆ’å°±èƒ½è·å¾—ç†æƒ³çš„ç»“æœã€‚å»ºç«‹è§„åˆ’æ¨¡å‹æ—¶ï¼Œéœ€è¦åˆ†åˆ«æ·»åŠ ä¸¤ç»„å˜é‡ï¼Œä¸€ç»„ç”¨æ¥è¡¨ç¤ºæ˜¯å¦åœ¨ä¸€ä¸ªå¤‡é€‰ä½ç½®ä¸Šå»ºç«‹è®¾æ–½ï¼Œå…± $N$ ä¸ª 0-1 å˜é‡ï¼Œå¦ä¸€ç»„ç”¨æ¥è¡¨ç¤ºæ¯ä¸ªå®¢æˆ·æ¥å—çš„ä¾›åº”è®¾æ–½ï¼Œå…± $N\times M$ ä¸ª 0-1 å˜é‡ã€‚è®¾ç½®å¥½å˜é‡åï¼Œå°†è®¾æ–½ä½ç½®æˆæœ¬ã€å®¹é‡ï¼Œå®¢æˆ·éœ€æ±‚ä»¥åŠæ¯ä¸ªä½ç½®å’Œå®¢æˆ·ä¹‹é—´çš„è·ç¦»è®¾ç½®åœ¨é™åˆ¶æ¡ä»¶ä¸­ç›´æ¥æ±‚è§£å³å¯å¾—åˆ°æœ€ä¼˜è§£ï¼Œè¯¦è§<a href="https://github.com/jixinfeng/discopt-soln/blob/master/week-06-facility/solver.py" target="_blank" rel="noopener" title="Facility Location Solution">å®Œæ•´ä»£ç </a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2018/09/19/Discrete-Optimization-Note-4-TSP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/19/Discrete-Optimization-Note-4-TSP/" class="post-title-link" itemprop="url">Discrete Optimization å­¦ä¹ ç¬”è®° (4) æ—…è¡Œå•†é—®é¢˜</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-19 18:40:09" itemprop="dateCreated datePublished" datetime="2018-09-19T18:40:09-04:00">2018-09-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-06 23:37:08" itemprop="dateModified" datetime="2020-01-06T23:37:08-05:00">2020-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p><a href="https://en.wikipedia.org/wiki/Travelling_salesman_problem" target="_blank" rel="noopener" title="TSP Wikipedia Page">æ—…è¡Œå•†é—®é¢˜</a>ï¼Œåˆç§°æ—…è¡Œæ¨é”€å‘˜é—®é¢˜ï¼Œç®€ç§° TSP ï¼Œåœ¨å¾ˆå¤š<a href="https://www.amazon.com/Pursuit-Traveling-Salesman-Mathematics-Computation/dp/0691152705" target="_blank" rel="noopener" title="TSP Book">ç§‘æ™®è¯»ç‰©</a>ã€<a href="https://xkcd.com/399/" target="_blank" rel="noopener" title="XKCD: Travelling Salesman Problem">æµè¡Œæ–‡åŒ–</a>ä¸­éƒ½å‡ºç°è¿‡è¿™ä¸€é—®é¢˜é—®é¢˜çš„å½±å­ã€‚æ—…è¡Œå•†é—®é¢˜çš„åŸºæœ¬å†…å®¹éå¸¸ç®€å•ï¼šä¸€ä½æ¨é”€å‘˜è¦å»ä¸€äº›åŸå¸‚æ¨é”€å•†å“ï¼Œå·²çŸ¥åŸå¸‚çš„ä½ç½®å’Œä¸¤ä¸¤ä¹‹é—´çš„è·ç¦»ï¼Œå¸Œæœ›èƒ½å¯»æ‰¾åˆ°ä¸€æ¡èƒ½ä¾¿åˆ©æ‰€æœ‰åŸå¸‚ï¼Œå¹¶ä¸”æ¯ä¸ªåŸå¸‚åªå»ä¸€æ¬¡ï¼Œæœ€åå›åˆ°å‡ºå‘åŸå¸‚çš„è·¯å¾„ï¼Œä»¥èŠ‚çº¦æ—¶é—´å’Œæ—…è¡Œæˆæœ¬ã€‚</p>
<p>å³ä½¿ä¸ç»è¿‡ä»»ä½•è½¬åŒ–ï¼ŒåŸå§‹å½¢å¼çš„æ—…è¡Œå•†é—®é¢˜å°±å¯ä»¥ç›´æ¥åº”ç”¨åœ¨è·¯å¾„è§„åˆ’ã€åå‹¤å­¦ã€èŠ¯ç‰‡ç”µè·¯è®¾è®¡ç­‰åœºæ™¯ä¸­ï¼Œç¨åŠ æ”¹åŠ¨ï¼Œåˆå¯ä»¥ç”¨æ¥è§£å†³ DNA æµ‹åºç­‰é—®é¢˜çš„å­é—®é¢˜ï¼Œå› æ­¤æ—…è¡Œå•†é—®é¢˜æ˜¯ä¼˜åŒ–é¢†åŸŸä¸­è¢«ç ”ç©¶çš„æœ€å¤šçš„é—®é¢˜ä¹‹ä¸€ã€‚</p>
<h2 id="é—®é¢˜æ±‚è§£"><a href="#é—®é¢˜æ±‚è§£" class="headerlink" title="é—®é¢˜æ±‚è§£"></a>é—®é¢˜æ±‚è§£</h2><p>æ—…è¡Œå•†é—®é¢˜æ˜¯ NP å›°éš¾é—®é¢˜ï¼Œå› æ­¤ä¸å­˜åœ¨å¤šé¡¹å¼å¤æ‚åº¦çš„æœ€ä¼˜è§£æ³•ã€‚å¯¹äºè§„æ¨¡è¾ƒå¤§çš„é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨è¿‘ä¼¼è§£æ³•ã€‚</p>
<h3 id="è´ªå¿ƒæ³•"><a href="#è´ªå¿ƒæ³•" class="headerlink" title="è´ªå¿ƒæ³•"></a>è´ªå¿ƒæ³•</h3><p>ç”¨è´ªå¿ƒæ³•è§£ TSP åªéœ€é€‰å–ä¸€ä¸ªåŸå¸‚ä½œä¸ºèµ·ç‚¹ï¼Œç„¶åæ¯ä¸€æ­¥éƒ½é€‰æ‹©è·ç¦»å½“å‰ä½ç½®æœ€è¿‘çš„åŸå¸‚ã€‚è´ªå¿ƒæ³•é€šå¸¸æ— æ³•æ‰¾åˆ°éå¸¸ä¼˜ç§€çš„è§£ï¼Œæ‰¾åˆ°è§£å¹³å‡é•¿åº¦æ¯”æœ€ä¼˜è§£é•¿ 25% å·¦å³ã€‚ä½†æ˜¯ï¼Œå­˜åœ¨ä¸€äº›å·§å¦™è®¾è®¡çš„æ—…è¡Œå•†é—®é¢˜ï¼Œä½¿å¾—è´ªå¿ƒæ³•åè€Œä¼šæ‰¾åˆ°æœ€å·®çš„è·¯å¾„ï¼Œå› æ­¤è´ªå¿ƒæ³•çš„ä½¿ç”¨èŒƒå›´æœ‰é™ã€‚</p>
<h3 id="å±€éƒ¨æœç´¢æ³•"><a href="#å±€éƒ¨æœç´¢æ³•" class="headerlink" title="å±€éƒ¨æœç´¢æ³•"></a>å±€éƒ¨æœç´¢æ³•</h3><p>å±€éƒ¨æœç´¢ä¹Ÿå¯ä»¥ç”¨æ¥æ±‚è§£ TSP ï¼Œæœ€å¸¸è§çš„æ–¹æ³•æ˜¯ 2-opt ï¼Œç®€å•æ¥è¯´å°±æ˜¯å¯¹è·¯çº¿è¿›è¡Œâ€œæ‹§éº»èŠ±â€å¼çš„ä¼˜åŒ–ã€‚<br><img src="/images/tsp-2-opt_wiki.png" alt="TSP 2-opt ä¼˜åŒ–æ€è·¯" title="TSP 2-opt ä¼˜åŒ–æ€è·¯"><br>æ­£å¦‚å›¾ä¸­ä¸ŠåŠéƒ¨åˆ†é‚£æ ·ï¼Œ $be$ å’Œ $df$ ä¸¤æ¡è·¯çº¿æœ‰äº¤å‰ï¼Œå¦‚æœèƒ½å°† $cde$ éƒ¨åˆ†è°ƒè½¬é‡æ–°æ¥å…¥è·¯å¾„ï¼Œåˆ™ TSP çš„æ€»è·ç¦»å¯ä»¥å‡å°‘ã€‚å¦‚æœèƒ½å°½å¯èƒ½å¤šåœ°å°è¯•å¯èƒ½çš„ç¿»è½¬æ–¹å¼ï¼Œå¦‚æœç¿»è½¬ä¹‹åæ€»è·¯å¾„èƒ½ç¼©çŸ­åˆ™ä¿ç•™ç¿»è½¬å¹¶ç»§ç»­æœç´¢ï¼Œç›´è‡³æ— æ³•é€šè¿‡ç¿»è½¬éƒ¨åˆ†è·¯å¾„ç¼©çŸ­æ€»è·ç¦»ä¸ºæ­¢ï¼Œå¯ä»¥å¾—åˆ°ä¸€æ¡æ¯”è¾ƒä¼˜ç§€çš„éå†æ‰€æœ‰åŸå¸‚çš„æ—…è¡Œè·¯çº¿ã€‚</p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œ 2-opt â€œæ‹§éº»èŠ±â€ çš„æ•ˆæœè¿˜ä¸å¤Ÿå¥½ï¼Œè¿˜å¯ä»¥é‡‡ç”¨åŒæ—¶ç¿»è½¬æ›´å¤šæ®µè·¯å¾„çš„ <a href="https://en.wikipedia.org/wiki/Travelling_salesman_problem#k-opt_heuristic,_or_Linâ€“Kernighan_heuristics" target="_blank" rel="noopener" title="TSP k-opt">k-opt</a> ä»¥åŠå¯ä»¥åŠ¨æ€è°ƒæ•´ç¿»è½¬æ®µè½æ•°çš„ <a href="https://en.wikipedia.org/wiki/Travelling_salesman_problem#V-opt_heuristic" target="_blank" rel="noopener" title="TSP V-opt">v-opt</a> ã€‚è¿™äº›æœç´¢æ–¹æ³•çš„æ•ˆæœæ›´å¥½ï¼Œä½†å¤æ‚åº¦ä¹Ÿæ›´é«˜ã€‚ 2-opt çš„ä»£ç åœ¨<a href="https://github.com/jixinfeng/discopt-soln/tree/master/week-04-tsp" target="_blank" rel="noopener" title="TSP Solution">è¿™é‡Œ</a>ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2018/09/14/Discrete-Optimization-Note-3-Set-Cover/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/09/14/Discrete-Optimization-Note-3-Set-Cover/" class="post-title-link" itemprop="url">Discrete Optimization å­¦ä¹ ç¬”è®° (3) é›†åˆè¦†ç›–é—®é¢˜</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-09-14 18:12:59" itemprop="dateCreated datePublished" datetime="2018-09-14T18:12:59-04:00">2018-09-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-06 23:37:08" itemprop="dateModified" datetime="2020-01-06T23:37:08-05:00">2020-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>é›†åˆè¦†ç›–é—®é¢˜æ˜¯ä¸€ä¸ªç»å…¸çš„ç»„åˆä¼˜åŒ–é—®é¢˜ï¼Œé—®é¢˜é€šå¸¸å¯ä»¥æè¿°ä¸ºï¼šç»™å®šå…¨é›† $\mathcal{U}$ ä»¥åŠ $\mathcal{S}={s_i\in\mathcal{U} \mid s_1, s_2, \ldots, s_n}$ å¹¶ä¸” $\cup_{i=1}^{n} s_i=\mathcal{U}$ ã€‚é›†åˆè¦†ç›–é—®é¢˜çš„ç›®æ ‡å°±æ˜¯æ‰¾åˆ°ä¸€ä¸ª $\mathcal{S}$ çš„æœ€å°å­é›† $\mathcal{C}$ï¼Œä½¿å¾— $\mathcal{C}$ çš„å¹¶é›†ä¸º $\mathcal{U}$ ã€‚</p>
<h2 id="è´ªå¿ƒæ³•"><a href="#è´ªå¿ƒæ³•" class="headerlink" title="è´ªå¿ƒæ³•"></a>è´ªå¿ƒæ³•</h2><p>è´ªå¿ƒæ³•å¯ä»¥ç”¨æ¥æ±‚è§£é›†åˆè¦†ç›–é—®é¢˜ï¼Œå¹¶ä¸”æ€è·¯å¾ˆç®€å•ï¼šæ¯æ¬¡é€‰æ‹©è¦†ç›–äº†æœ€å¤šå°šæœªè¢«è¦†ç›–å…ƒç´ çš„é›†åˆå³å¯ã€‚é›†åˆè¦†ç›–é—®é¢˜æ˜¯ $\mathcal{NP}$ å®Œå…¨é—®é¢˜ï¼Œå› æ­¤è´ªå¿ƒæ³•åªèƒ½å¾—åˆ° $\mathcal{O}(\log n)$ è¿‘ä¼¼çš„è¿‘ä¼¼è§£ã€‚è¿™ä¹Ÿæ˜¯å¤šé¡¹å¼æ—¶é—´å†…èƒ½å¾—åˆ°çš„<a href="http://pages.cs.wisc.edu/~shuchi/courses/787-F07/scribe-notes/lecture02.pdf" target="_blank" rel="noopener" title="Greedy Set Cover">æœ€å¥½ç»“æœ</a>äº†ã€‚</p>
<h2 id="æ•´æ•°è§„åˆ’"><a href="#æ•´æ•°è§„åˆ’" class="headerlink" title="æ•´æ•°è§„åˆ’"></a>æ•´æ•°è§„åˆ’</h2><p>è™½ç„¶æ—¶é—´å¤æ‚åº¦å¾ˆé«˜ï¼Œä½†æ•´æ•°è§„åˆ’å¯ä»¥æ±‚å‡ºé›†åˆè¦†ç›–çš„æœ€ä¼˜è§£ï¼Œå¹¶ä¸”å½¢å¼æ¯”è¾ƒç®€å•ï¼Œåœ¨ gurobi çš„å¸®åŠ©ä¸‹ï¼Œè§£å†³ä¸€å®šè§„æ¨¡çš„é—®é¢˜éœ€è¦çš„æ—¶é—´è¿˜æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p>
<p>ä»¤ $M=|\mathcal{U}|$ ï¼Œ$N=|\mathcal{S}|$ ï¼Œè®¾ç½®å˜é‡ $x_0, x_1, \ldots, x_{N-1}$ å’Œç³»æ•° $a_{00}, a_{01}\ldots, a_{0(M-1)},\ldots, a_{(N-1)(M-1)}$ ã€‚å…¶ä¸­ $x_i=1$ è¡¨ç¤ºé€‰æ‹©ç¬¬ $i$ ä¸ªé›†åˆï¼Œåä¹‹ä¸é€‰ï¼Œ$a_{ij}=1$ è¡¨ç¤ºé›†åˆ $i$ ä¸­åŒ…å« $\mathcal{U}$ ä¸­ç¬¬ $j$ ä¸ªå…ƒç´ ï¼Œåä¹‹æ²¡æœ‰ã€‚ä¸ºäº†ä¿è¯ $\mathcal{U}$ ä¸­æ‰€æœ‰å…ƒç´ å‡è¢«è¦†ç›–ï¼Œåªéœ€ä¿è¯æ¯ä¸ªå…ƒç´ éƒ½è¢«åŒ…å«åœ¨è‡³å°‘ä¸€ä¸ªé€‰ä¸­çš„å­é›†ä¸­ï¼Œå› æ­¤é›†åˆè¦†ç›–é—®é¢˜çš„æ ‡å‡†å½¢å¼å°±å¯ä»¥å†™å‡ºæ ‡å‡†å½¢å¼å¦‚ä¸‹ï¼š</p>
<p>$$\begin{align<em>}<br>\min  &amp; \sum i_{i} \<br> s.t. &amp; \sum_{i=0}^{N-1} a_{ij}x_i\geq 1 &amp; j=1,\ldots, M<br>\end{align</em>}$$</p>
<p>å®Œæ•´çš„<a href="https://github.com/jixinfeng/discopt-soln/blob/master/week-03-setcover/solver.py" target="_blank" rel="noopener" title="Set Cover Solution">è§£é¢˜ä»£ç </a>åœ¨ Github ä¸Šã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2018/05/01/update-lc-index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/01/update-lc-index/" class="post-title-link" itemprop="url">ï¼ˆåŠï¼‰è‡ªåŠ¨æ›´æ–° LeetCode è§£é¢˜è¿›åº¦</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-05-01 17:30:53" itemprop="dateCreated datePublished" datetime="2018-05-01T17:30:53-04:00">2018-05-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-06 23:37:08" itemprop="dateModified" datetime="2020-01-06T23:37:08-05:00">2020-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>æˆ‘åœ¨åšå®¢çš„å…³äºé¡µé¢æ”¾äº†ä¸€ä¸ª LeetCode çš„è¿›åº¦è¡¨ï¼Œåˆ†åˆ«æ ‡è®°äº†æ¯é“é¢˜æ˜¯å¦å·²ç»å†™å‡ºä»£ç ï¼Œä»¥åŠæ˜¯å¦å†™äº†è§£æã€‚æ‰‹åŠ¨æ›´æ–°è¿™äº›å†…å®¹éå¸¸è´¹æ—¶è´¹åŠ›ï¼ŒåŒæ—¶ä¹Ÿå®¹æ˜“å‡ºé”™ï¼Œå› æ­¤ä»Šå¤©è¯•ç€å†™äº†ä¸€å°æ®µ Python ç¨‹åºä»¥è‡ªåŠ¨åŒ–æ›´æ–°è§£é¢˜è¿›åº¦ï¼Œä¸»è¦ç”¨åˆ°äº†ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å’Œ python è‡ªå¸¦çš„ <code>filter</code> å’Œ <code>map</code> å‘½ä»¤ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> listdir</span><br><span class="line"></span><br><span class="line">src_list = listdir(<span class="string">'SRC_DIR'</span>)</span><br><span class="line">src_list = filter(<span class="keyword">lambda</span> filename: re.match(<span class="string">'\d\d\d'</span>, filename), src_list)</span><br><span class="line">src_nums = set(map(<span class="keyword">lambda</span> filename: int(filename.split(<span class="string">'_'</span>)[<span class="number">0</span>]), src_list))</span><br><span class="line"></span><br><span class="line">post_list = listdir(<span class="string">'POST_DIR'</span>)</span><br><span class="line">post_list = filter(<span class="keyword">lambda</span> x: x[:<span class="number">8</span>] == <span class="string">"Leetcode"</span>, post_list)</span><br><span class="line">post_nums = set(map(<span class="keyword">lambda</span> filename: int(filename.split(<span class="string">'-'</span>)[<span class="number">1</span>]), post_list))</span><br><span class="line"></span><br><span class="line">lines = []</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"index.md"</span>, <span class="string">"r"</span>) <span class="keyword">as</span> index:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> index:</span><br><span class="line">        <span class="keyword">if</span> re.match(<span class="string">'\|(\d)+\|'</span>, line):</span><br><span class="line">            items = line.split(<span class="string">'|'</span>)</span><br><span class="line">            idx = int(items[<span class="number">1</span>])</span><br><span class="line">            <span class="keyword">if</span> idx <span class="keyword">in</span> src_nums:</span><br><span class="line">                items[<span class="number">4</span>] = <span class="string">u"\U00002713"</span></span><br><span class="line">            <span class="keyword">if</span> idx <span class="keyword">in</span> post_nums:</span><br><span class="line">                items[<span class="number">5</span>] = <span class="string">u"\U00002713"</span></span><br><span class="line">            lines.append(<span class="string">'|'</span>.join(items))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lines.append(line)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">    print(line, end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure>

<p>æˆ‘çš„ LeetCode ä»£ç æ–‡ä»¶åæ ¼å¼ä¸ºï¼š<code>###_name.py</code> ï¼Œ Hexo ä¸Šè§£ææ–‡ç« çš„æ–‡ä»¶åä¸ºï¼š â€˜Leetcode-###-name.mdâ€™ ã€‚å› æ­¤æˆ‘æ‰ç”¨çš„æ–¹å¼ä¸ºï¼šéå†ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œè·å¾—å·²ç»ä¿å­˜çš„ä»£ç å’Œæ–‡ç« å¯¹åº”çš„é¢˜å·ï¼Œä¿å­˜æˆ set ã€‚ç„¶åå†é€è¡Œéå† <code>index.md</code> ï¼Œé‡åˆ°è¡¨æ ¼ç¬¬ä¸€åˆ—æ˜¯æ•°å­—çš„è¡Œï¼Œå°±å–å¾—é¢˜å·å¹¶åˆ¤æ–­è¯¥é¢˜å·åœ¨ <code>src_nums</code> åŠ <code>post_nums</code> ä¸­æ˜¯å¦å­˜åœ¨ã€‚åˆ¤æ–­å®Œæˆåå°†å¯¹åº”çš„è¡¨æ ¼åˆ—æ”¹æˆ <code>u&quot;\U00002713&quot;</code> å³ âœ“ ã€‚</p>
<p>ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºåŠè‡ªåŠ¨ï¼Œæ˜¯å› ä¸º <code>index.md</code> ä¸­çš„é¢˜ç›®åˆ—è¡¨è¿˜åªèƒ½æ‰‹åŠ¨æ·»åŠ ï¼Œç›®å‰åªæ·»åŠ äº†å‰700é¢˜ï¼Œå¸Œæœ›ä»¥åèƒ½æœ‰åŠæ³•æŠŠè¿™ä¸€æ­¥ä¹Ÿè‡ªåŠ¨åŒ–ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2018/04/30/Discrete-Optimization-Note-2-Graph-Coloring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/30/Discrete-Optimization-Note-2-Graph-Coloring/" class="post-title-link" itemprop="url">Discrete Optimization å­¦ä¹ ç¬”è®° (2) å›¾ç€è‰²é—®é¢˜</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-30 13:06:34" itemprop="dateCreated datePublished" datetime="2018-04-30T13:06:34-04:00">2018-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-06 23:37:08" itemprop="dateModified" datetime="2020-01-06T23:37:08-05:00">2020-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>ç€è‰²é—®é¢˜æ¥è‡ªäºäººä»¬ç»˜åˆ¶åœ°å›¾çš„éœ€æ±‚ã€‚åœ¨ç»˜åˆ¶åœ°å›¾æ—¶ï¼Œäººä»¬å¸Œæœ›ç›¸é‚»çš„å›½å®¶ä½¿ç”¨ä¸åŒçš„é¢œè‰²ï¼Œå¹¶ä¸”ä½¿ç”¨å°½å¯èƒ½å°‘çš„é¢œè‰²ç»˜åˆ¶æ•´å¼ åœ°å›¾ã€‚</p>
<p>è¿›è¡Œæ•°å­¦æŠ½è±¡åï¼Œé—®é¢˜å°±å˜æˆäº†ï¼šç»™å®šä¸€ä¸ªæ— å‘å›¾ $\mathcal{G}(\mathcal{V},\mathcal{E})$ ï¼Œå…¶ä¸­ $\mathcal{V}$ ä¸ºé¡¶ç‚¹é›†åˆï¼Œ $\mathcal{E}$ ä¸ºè¾¹é›†åˆï¼Œå¸Œæœ›æ‰¾åˆ° $\mathcal{V}$ çš„ä¸€ä¸ªåˆ’åˆ†å°†å…¶åˆ†æˆ $K$ ç»„ï¼Œä½¿å¾—æ¯ä¸ªåˆ’åˆ†ä¸­çš„é¡¶ç‚¹å‡äº’ä¸ç›¸é‚»ã€‚æœ€å°ç€è‰²é—®é¢˜å¾—ç›®æ ‡å³æ˜¯æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„æœ€å°çš„ $K$ ã€‚</p>
<p>ä¸<a href="/2017/12/06/Discrete-Optimization-Note-1-Knapsack/" title="èƒŒåŒ…é—®é¢˜">èƒŒåŒ…é—®é¢˜</a>ä¸€æ ·ï¼Œå›¾ç€è‰²é—®é¢˜ä¹Ÿæ˜¯ NP å®Œå…¨é—®é¢˜ï¼Œå› æ­¤æ— æ³•æ‰¾å‡ºå¤šé¡¹å¼æ—¶é—´çš„æœ€ä¼˜è§£æ³•ã€‚ä¸è¿‡é€šè¿‡è´ªå¿ƒæ³•å¯ä»¥å¿«é€Ÿæ‰¾åˆ°é«˜è´¨é‡çš„æ¬¡ä¼˜è§£ï¼Œå¹¶å¯ä»¥ä»¥æ­¤ä¸ºåŸºç¡€é€šè¿‡æ•´æ•°è§„åˆ’æ‰¾åˆ°æœ€ä¼˜è§£ã€‚</p>
<h2 id="è´ªå¿ƒæ³•"><a href="#è´ªå¿ƒæ³•" class="headerlink" title="è´ªå¿ƒæ³•"></a>è´ªå¿ƒæ³•</h2><p>ç”¨è´ªå¿ƒæ³•è§£å†³ç€è‰²é—®é¢˜çš„åŸºæœ¬æ€è·¯éå¸¸ç®€å•ï¼Œä¸»è¦æ­¥éª¤ä¸ºï¼š</p>
<ol>
<li>é€šè¿‡æŸç§è´ªå¿ƒç­–ç•¥ä¸æ–­å¯»æ‰¾å›¾ä¸­çš„ä¸ç›¸è¿ç‚¹é›†</li>
<li>å°†æ¯æ¬¡æ‰¾åˆ°çš„ç‚¹é›†æŒ‡å®šä¸€ç§é¢œè‰²å¹¶ä»å›¾ä¸­å»æ‰è¿™äº›é¡¶ç‚¹</li>
<li>é‡å¤1ã€2ä¸¤æ­¥ç›´è‡³æ‰€æœ‰å®šç‚¹å‡è¢«ç€è‰²</li>
</ol>
<p>Python ä¸‹å¸¸ç”¨çš„å›¾è®ºåˆ†æè½¯ä»¶åŒ… <a href="https://networkx.github.io" target="_blank" rel="noopener" title="NetworkX">NetworkX</a> ä¸­å·²ç»æä¾›äº†å¾ˆå¤šå¸¸è§çš„è´ªå¿ƒç­–ç•¥å’Œç€è‰²å‡½æ•°ã€‚å› æ­¤è´ªå¿ƒæ³•è§£æŸ“è‰²é—®é¢˜æœ€ç®€å•çš„å®ç°å°±æ˜¯å¯¹äºç»™å®šçš„å›¾ $\mathcal{G}(\mathcal{V},\mathcal{E})$ ï¼Œå°†æ‰€æœ‰è´ªå¿ƒç­–ç•¥å‡å°è¯•ä¸€éï¼Œä¿ç•™æ‰€éœ€é¢œè‰²æ•°æœ€å°çš„è§£ã€‚è´ªå¿ƒè§£æ³•å‡½æ•°çš„ <code>python</code> ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">greedy</span><span class="params">(node_count, edges)</span>:</span></span><br><span class="line">    graph = nx.Graph()</span><br><span class="line">    graph.add_nodes_from(range(node_count))</span><br><span class="line">    graph.add_edges_from(edges)</span><br><span class="line"></span><br><span class="line">    strategies = [nx.coloring.strategy_largest_first,</span><br><span class="line">                  nx.coloring.strategy_random_sequential,</span><br><span class="line">                  nx.coloring.strategy_smallest_last,</span><br><span class="line">                  nx.coloring.strategy_independent_set,</span><br><span class="line">                  nx.coloring.strategy_connected_sequential_bfs,</span><br><span class="line">                  nx.coloring.strategy_connected_sequential_dfs,</span><br><span class="line">                  nx.coloring.strategy_connected_sequential,</span><br><span class="line">                  nx.coloring.strategy_saturation_largest_first]</span><br><span class="line"></span><br><span class="line">    best_color_count, best_coloring = node_count, &#123;i: i <span class="keyword">for</span> i <span class="keyword">in</span> range(node_count)&#125;</span><br><span class="line">    <span class="keyword">for</span> strategy <span class="keyword">in</span> strategies:</span><br><span class="line">        curr_coloring = nx.coloring.greedy_color(G=graph, strategy=strategy)</span><br><span class="line">        curr_color_count = max(curr_coloring.values()) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> curr_color_count &lt; best_color_count:</span><br><span class="line">            best_color_count = curr_color_count</span><br><span class="line">            best_coloring = curr_coloring</span><br><span class="line">    <span class="keyword">return</span> best_color_count, <span class="number">0</span>, [best_coloring[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(node_count)]</span><br></pre></td></tr></table></figure>

<h2 id="æ•´æ•°è§„åˆ’"><a href="#æ•´æ•°è§„åˆ’" class="headerlink" title="æ•´æ•°è§„åˆ’"></a>æ•´æ•°è§„åˆ’</h2><p>ç€è‰²é—®é¢˜åŒæ ·å¯ä»¥è½¬æ¢æˆæ ‡å‡† ILP å½¢å¼ä¹‹ååˆ©ç”¨ gurobi æ±‚è§£ã€‚æ„é€ æ–¹æ³•å¯ä»¥å‚è€ƒä¸€æœ¬è€æ•™æ <a href="http://web.mit.edu/15.053/www/AMP.htm" target="_blank" rel="noopener" title="Applied Mathematical Programming">Applied Mathematical Programming</a> ä¸­ç¬¬ä¹ç«  <a href="http://web.mit.edu/15.053/www/AMP-Chapter-09.pdf" target="_blank" rel="noopener" title="Integer Programming">Integer Programming</a> ï¼ˆæ•´æ•°è§„åˆ’ï¼‰ç»™å‡ºçš„ä¾‹å­ã€‚</p>
<h3 id="æ ‡å‡†å½¢å¼"><a href="#æ ‡å‡†å½¢å¼" class="headerlink" title="æ ‡å‡†å½¢å¼"></a>æ ‡å‡†å½¢å¼</h3><p>ä»¤ $N=|\mathcal{V}|$ ï¼Œè®¾ç½®ä¸¤ç»„å˜é‡ $y_0, y_1, \ldots, y_{N-1}$ ä»¥åŠ $x_{00}, x_{01}\ldots, x_{0(N-1)},\ldots, x_{(N-1)(N-1)}$ ã€‚å…¶ä¸­ $y_k=1$ è¡¨ç¤ºä½¿ç”¨ç¬¬ $i$ ç§é¢œè‰² $x_{ik}=1$ è¡¨ç¤ºé¡¶ç‚¹ $i$ ä½¿ç”¨é¢œè‰² $k$ è¿›è¡Œç€è‰²ã€‚å¯ä»¥åˆ—å‡ºä¼˜åŒ–é—®é¢˜æ ‡å‡†å½¢å¼å¦‚ä¸‹ï¼š</p>
<p>$$\begin{align<em>}<br>\min  &amp; \sum y_{i} \<br> s.t. &amp; \sum_{k=0}^{N-1} x_{ik}=1 &amp; i=1,\ldots, N\<br>      &amp; x_{ik} - y_k\leq 0        &amp; i,k=1,\ldots, N \<br>      &amp; x_{ik}+x_{jk}\leq 1       &amp; (i,j)\in\mathcal{E}\<br>      &amp; x_{ik},y_k\in{0,1}<br>\end{align</em>}$$</p>
<p>å°†é¢˜ç›®ä¸­ç»™å®šçš„æ•°æ®æŒ‰æ ‡å‡†å½¢å¼è¾“å…¥åˆ° gurobi ä¸­å³å¯æ±‚å¾—æœ€ä¼˜è§£ï¼Œä½†æ˜¯éšç€å›¾è§„æ¨¡çš„å¢åŠ ï¼Œè§£é¢˜æ‰€éœ€çš„æ—¶é—´ä¹Ÿä»¥æå¿«çš„é€Ÿåº¦å¢é•¿ã€‚å› æ­¤ï¼Œéœ€è¦å¯¹æ ‡å‡†å½¢å¼è¿›è¡Œä¸€äº›æ”¹è¿›ï¼Œè¿›ä¸€æ­¥æé«˜æ€§èƒ½</p>
<h3 id="æ€§èƒ½ä¼˜åŒ–1ï¼šå»é™¤å¯èƒ½çš„é‡å¤è§£"><a href="#æ€§èƒ½ä¼˜åŒ–1ï¼šå»é™¤å¯èƒ½çš„é‡å¤è§£" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–1ï¼šå»é™¤å¯èƒ½çš„é‡å¤è§£"></a>æ€§èƒ½ä¼˜åŒ–1ï¼šå»é™¤å¯èƒ½çš„é‡å¤è§£</h3><p>å› ä¸ºç€è‰²é—®é¢˜æœ‰å¯¹ç§°æ€§ï¼Œå› æ­¤é€šè¿‡æ ‡å‡†å½¢å¼å¯ä»¥å¾—åˆ°å¾ˆå¤šç­‰ä»·çš„ç€è‰²é—®é¢˜çš„è§£æ³•ã€‚æ¯”å¦‚ï¼Œæœ‰5ç§å¯èƒ½çš„é¢œè‰²ï¼ˆ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼‰å¯ä¾›é€‰æ‹©æ—¶ï¼Œå¦‚æœæœ€ä¼˜è§£çš„ç€è‰²æ•°æ˜¯3ï¼Œé‚£ä¹ˆé€‰æ‹©ï¼ˆ1ï¼Œ2ï¼Œ3ï¼‰å’Œï¼ˆ3ï¼Œ4ï¼Œ5ï¼‰ä»¥åŠï¼ˆ1ï¼Œ3ï¼Œ5ï¼‰ç­‰ä»»æ„ä¸‰ç§é¢œè‰²éƒ½æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯åœ¨ ILP ä¸­ä»–ä»¬è¡¨ç¤ºçš„æ˜¯å®Œå…¨ä¸åŒçš„è§£ã€‚å› æ­¤éœ€è¦å¢åŠ ä¸€æ¡é™åˆ¶ï¼šä¼˜å…ˆé€‰æ‹©ç¼–å·æ›´å°çš„é¢œè‰²ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯¹äºä¸€ä¸ªå·²çŸ¥çš„è§£ï¼Œå¯¹è°ƒä¸¤ç»„é‡‡ç”¨äº†ä¸åŒé¢œè‰²çš„é¡¶ç‚¹çš„ç€è‰²ï¼Œå¾—åˆ°çš„æ–°è§£å’ŒåŸæ¥çš„è§£ä¹Ÿæ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯åœ¨ ILP ä¸­å¯¹è°ƒé¢œè‰²çš„è§£ä¼šè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„ã€‚å› æ­¤éœ€è¦å¢åŠ ç¬¬äºŒæ¡é™åˆ¶ï¼Œç¼–å·å°çš„é¢œè‰²åº”è¯¥å¯¹å°½å¯èƒ½å¤šçš„é¡¶ç‚¹è¿›è¡Œç€è‰²ã€‚</p>
<h3 id="æ€§èƒ½ä¼˜åŒ–2ï¼šå‡å°‘å¯é€‰çš„é¢œè‰²"><a href="#æ€§èƒ½ä¼˜åŒ–2ï¼šå‡å°‘å¯é€‰çš„é¢œè‰²" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–2ï¼šå‡å°‘å¯é€‰çš„é¢œè‰²"></a>æ€§èƒ½ä¼˜åŒ–2ï¼šå‡å°‘å¯é€‰çš„é¢œè‰²</h3><p>ILP æ ‡å‡†å½¢å¼ä¸­ï¼Œç”±äºä¸çŸ¥é“æœ€å°‘å¯ä»¥ä½¿ç”¨å¤šå°‘ç§é¢œè‰²ï¼Œå› æ­¤åœ¨åˆå§‹åŒ–æ—¶å¿…é¡»ä½¿ç”¨ $N$ ç§é¢œè‰²ï¼Œå³å‡è®¾æ¯ä¸ªå®šç‚¹éƒ½éœ€è¦ä¸€ç§ä¸åŒçš„é¢œè‰²ï¼Œè¿™æ ·å°±éœ€è¦ $N^2+N$ ä¸ªå˜é‡ã€‚ä½†æ˜¯æ ¹æ®è´ªå¿ƒæ³•å¾—å‡ºçš„æ¬¡ä¼˜è§£å¯ä»¥çœ‹å‡ºï¼šå¯¹äºä½œä¸šé¢˜ç›®ä¸­ç»™å‡ºçš„æ•°æ®ï¼Œç€è‰²æ‰€éœ€çš„é¢œè‰²æ•°é€šå¸¸è¿œè¿œå°äºå›¾çš„å®šç‚¹æ•°ã€‚å› æ­¤å¯ä»¥åœ¨åˆå§‹åŒ– ILP ä¹‹å‰ï¼Œå…ˆä½¿ç”¨è´ªå¿ƒæ³•æ±‚çš„æ¬¡ä¼˜è§£æ‰€éœ€çš„é¢œè‰²æ•° $m$ï¼Œå¹¶æŒ‰æœ‰ $m$ ä¸ªå¯é€‰é¢œè‰²è®¾ç½® ILP ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘ ILP çš„è§„æ¨¡ã€‚</p>
<h3 id="æ€§èƒ½ä¼˜åŒ–3ï¼šç”¨è´ªå¿ƒæ³•çš„è§£åˆå§‹åŒ–-ILP"><a href="#æ€§èƒ½ä¼˜åŒ–3ï¼šç”¨è´ªå¿ƒæ³•çš„è§£åˆå§‹åŒ–-ILP" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–3ï¼šç”¨è´ªå¿ƒæ³•çš„è§£åˆå§‹åŒ– ILP"></a>æ€§èƒ½ä¼˜åŒ–3ï¼šç”¨è´ªå¿ƒæ³•çš„è§£åˆå§‹åŒ– ILP</h3><p>åœ¨ç”¨è´ªå¿ƒæ³•è·å¾—äº†æ¬¡ä¼˜è§£ä¹‹åï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨æ¬¡ä¼˜è§£çš„å€¼ä¸º ILP å„ä¸ªå˜é‡èµ‹åˆå§‹å€¼å€¼ï¼Œå‡å°‘ ILP å¯»æ‰¾ç¬¬ä¸€ä¸ªå¯è¡Œè§£æ‰€éœ€çš„æ—¶é—´ã€‚ä½†æ˜¯æ ¹æ®è§‚å¯Ÿï¼Œè¿™ä¸ªåšæ³•å¸¦æ¥çš„æ€§èƒ½æå‡ä¼¼ä¹å¹¶ä¸æ˜æ˜¾ã€‚</p>
<p>å®Œæ•´<a href="https://github.com/jixinfeng/discopt-soln/blob/master/week-03-coloring/solver.py" target="_blank" rel="noopener" title="Graph Coloring Solution">è§£é¢˜ä»£ç </a>æ¯”è¾ƒé•¿ï¼Œå°±ä¸åœ¨è¿™é‡Œè´´äº†ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2018/01/18/Union-Find/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/18/Union-Find/" class="post-title-link" itemprop="url">å¹¶æŸ¥é›†ä¸åˆå¹¶-æŸ¥æ‰¾ç®—æ³•çš„ Python å®ç°</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-18 16:06:02" itemprop="dateCreated datePublished" datetime="2018-01-18T16:06:02-05:00">2018-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-06 23:37:08" itemprop="dateModified" datetime="2020-01-06T23:37:08-05:00">2020-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>åœ¨å¾ˆå¤šå’Œç½‘ç»œæœ‰å…³çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦è¿›è¡Œä¸€ç±»æ“ä½œï¼šè®°å½•èŠ‚ç‚¹ä¹‹é—´æ˜¯å¦ç›´æ¥ç›¸è¿ï¼Œç„¶åè®¡ç®—ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦èƒ½é€šè¿‡æŸäº›é‚»å±…è€Œé—´æ¥è¿æ¥ã€‚æ¯”å¦‚ï¼šåœ¨ç¤¾äº¤ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå¿«é€ŸçŸ¥é“ä¸¤ä¸ªäººæ˜¯å¦å¯ä»¥é€šè¿‡æŸäº›å…±åŒå¥½å‹è€Œå»ºç«‹è”ç³»ï¼›åœ¨åœ°å›¾ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå¿«é€ŸçŸ¥é“ä¸¤åœ°ä¹‹é—´æ˜¯å¦å­˜åœ¨ä¸€æ¡é€šè·¯ã€‚å¦‚æœæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­è¿™æ ·çš„è¿æ¥æ˜¯å¦å­˜åœ¨è€Œä¸éœ€è¦çŸ¥é“å…·ä½“çš„è¿æ¥è·¯å¾„ï¼ŒåŸºäº<a href="https://en.wikipedia.org/wiki/Disjoint-set_data_structure" target="_blank" rel="noopener" title="Union Find">å¹¶æŸ¥é›†</a>çš„åˆå¹¶-æŸ¥æ‰¾ç®—æ³• (Union Find) å°±æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„æ–¹æ³•ã€‚</p>
<h2 id="æ•°æ®ç»“æ„å’Œæ–¹æ³•"><a href="#æ•°æ®ç»“æ„å’Œæ–¹æ³•" class="headerlink" title="æ•°æ®ç»“æ„å’Œæ–¹æ³•"></a>æ•°æ®ç»“æ„å’Œæ–¹æ³•</h2><p>å¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å½¢çš„æ•°æ®ç»“æ„ï¼Œå…¶æ€è·¯å°±æ˜¯ç»´æŠ¤ä¸€é¢—èŠ‚ç‚¹çš„æ ‘ï¼Œå½“ä¸¤ä¸ªä¸ç›´æ¥ç›¸è¿çš„èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„æ ¹ç»“ç‚¹æ—¶ï¼Œå°±å¯ä»¥è®¤ä¸ºä¸¤ä¸ªèŠ‚ç‚¹å­˜åœ¨è¿æ¥ã€‚é¡¾åæ€ä¹‰ï¼Œ Union Find éœ€è¦ç”¨åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>union</code> å³åˆå¹¶ï¼Œè´Ÿè´£è®°å½•èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»</li>
<li><code>find</code> å³æŸ¥æ‰¾ï¼Œè´Ÿè´£æŸ¥è¯¢è¾“å…¥çš„ä¸¤ä¸ªç‚¹ä¹‹é—´æ˜¯å¦å­˜åœ¨ç›¸è¿å…³ç³»</li>
</ul>
<p>åŒæ—¶ï¼Œåœ¨åˆå§‹åŒ–æ—¶è¿˜è¦åˆ¶å®šèŠ‚ç‚¹æ•° <code>n</code> ã€‚</p>
<h2 id="Quick-Find"><a href="#Quick-Find" class="headerlink" title="Quick Find"></a>Quick Find</h2><p>Quick Find å¯ä»¥ä¿è¯åœ¨å¸¸æ•°æ—¶é—´å¤æ‚åº¦å†…å®ŒæˆæŸ¥æ‰¾ï¼Œé‡‡ç”¨çš„æ€è·¯æ˜¯ç»´æŠ¤ä¸€é¢—æ‰å¹³çš„æ ‘ï¼š<br>åœ¨æ•°æ®ç»“æ„ä¸­æ·»åŠ ä¸€ä¸ªæ•°ç»„ <code>idx</code> è´Ÿè´£è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œæ ¹èŠ‚ç‚¹çš„ <code>idx</code> å€¼å°±æ˜¯è‡ªå·±ï¼Œå³ <code>idx[i]=i</code>ã€‚åœ¨æ¯æ¬¡æ‰§è¡Œä¸€æ¬¡ <code>union</code> æ“ä½œæ—¶ï¼Œå¦‚ <code>union(p, q)</code> å°† <code>idx[p]</code> çš„å€¼è®¾ç½®ä¸º <code>q</code> ï¼Œå¹¶ä¸”éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¦‚æœ <code>idx[i]==p</code> å³ <code>p</code> æ˜¯ <code>i</code> çš„çˆ¶èŠ‚ç‚¹ï¼Œåˆ™é‡æ–°è®¾ç½® <code>idx[i]=q</code> ã€‚ä¿è¯æ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å°±æ˜¯æ ¹ç»“ç‚¹ã€‚æŸ¥æ‰¾æ—¶ï¼Œè°ƒç”¨ <code>find(a, b)</code> ï¼Œåªéœ€åˆ¤æ–­ <code>idx[a]==idx[b]</code> å³å¯ï¼Œå¤æ‚åº¦ä¸º $O(1)$ã€‚</p>
<p>è™½ç„¶ Quick Find å¯ä»¥éå¸¸é«˜æ•ˆåœ°è¿›è¡ŒæŸ¥æ‰¾ï¼Œä½†æ˜¯æ¯æ¬¡æ·»åŠ ä¸€æ¡æ–°è¾¹æ—¶ï¼Œéƒ½è¦æ‰«æä¸€éæ‰€æœ‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œæ·»åŠ æ¯ä¸ªèŠ‚ç‚¹çš„è¿æ¥å…³ç³»æ—¶éƒ½éœ€è¦ $O(N)$ æ¬¡æ“ä½œï¼Œæ‰©å±•æ€§è¾ƒå·®ã€‚</p>
<p>Quick Find çš„ä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">quickFind</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.nodes = n</span><br><span class="line">        self.idx = list(range(n))</span><br><span class="line">        self.parts = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, edge)</span>:</span></span><br><span class="line">        p, q = edge[<span class="number">0</span>], edge[<span class="number">1</span>]</span><br><span class="line">        idxp, idxq = self.idx[p], self.idx[q]</span><br><span class="line">        <span class="keyword">if</span> idxp == idxq:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> self.idx[i] == idxp:</span><br><span class="line">                self.idx[i] == idxq</span><br><span class="line">        self.parts -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, p, q)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.idx[p] == self.idx[q]</span><br></pre></td></tr></table></figure>

<h2 id="Quick-Union"><a href="#Quick-Union" class="headerlink" title="Quick Union"></a>Quick Union</h2><p>Quick Find çš„ union æ“ä½œæ•ˆç‡å¤ªä½ï¼Œä¸ºäº†æå‡ union æ•ˆç‡ï¼Œå¯ä»¥æ”¹ç”¨ Quick Union çš„åšæ³•ã€‚ Quick Union ä¸èƒ½ä¿è¯åœ¨å¸¸æ•°æ—¶é—´å¤æ‚åº¦å†…å®ŒæˆæŸ¥æ‰¾ï¼Œä½†æ˜¯å¯ä»¥å¿«é€Ÿæ·»åŠ æ–°è¾¹ã€‚</p>
<p>Quick Union ä¸å†ä¿è¯æ ‘æ˜¯æ‰å¹³çš„ï¼Œè€Œæ˜¯åœ¨æ¯æ¬¡æ‰§è¡Œ <code>union(p, q)</code> æ—¶ï¼Œæ‰¾åˆ° <code>p</code> å’Œ <code>q</code> æ‰€åœ¨æ ‘çš„æ ¹èŠ‚ç‚¹ <code>rp</code> ã€ <code>rq</code> ï¼Œå¹¶ä¸”å°† <code>rq</code> è®¾ç½®ä¸º <code>rp</code> çš„çˆ¶èŠ‚ç‚¹ï¼Œåœ¨æŸ¥æ‰¾æ—¶ï¼ŒåŒæ ·æ‰¾åˆ°å¯¹æ¯”ä¸¤ä¸ªç‚¹æ‰€åœ¨çš„æ ¹ç»“ç‚¹å³å¯ã€‚ Quick Union çš„æ—¶é—´å¤æ‚åº¦å°±å®Œå…¨å–å†³äºæ ‘çš„æ·±åº¦ï¼Œä½†æ˜¯å¯¹æ ‘çš„å¹³è¡¡æ€§å®Œå…¨æ²¡æœ‰æ§åˆ¶ï¼Œå› æ­¤åœ¨æœ€åæƒ…å†µä¸‹ï¼Œè¾“å…¥çš„æ•°æ®æ˜¯ä¸€æ¡é“¾å½¢çš„ç»“æ„ï¼Œå³æ ‘å˜æˆäº†é“¾è¡¨ï¼Œé‚£ä¹ˆ <code>union</code> å’Œ <code>find</code> çš„å¤æ‚åº¦éƒ½ä¼šå˜æˆ $O(N)$ ï¼Œæ¯” Quick Find è¿˜è¦å·®ã€‚</p>
<p>Quick Union çš„ä»£ç å¦‚ä¸‹ï¼Œç”±äºç»äº§éœ€è¦æŸ¥æ‰¾æ ¹ç»“ç‚¹çš„æ“ä½œï¼Œå› æ­¤å•ç‹¬å®šä¹‰äº† <code>root</code> å‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">quickUnion</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.nodes = n</span><br><span class="line">        self.idx = list(range(n))</span><br><span class="line">        self.parts = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">root</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> node != self.idx[node]:</span><br><span class="line">            node = self.idx[node]</span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, edge)</span>:</span></span><br><span class="line">        p, q = edge[<span class="number">0</span>], edge[<span class="number">1</span>]</span><br><span class="line">        rootp, rootq = self.root(p), self.root(q)</span><br><span class="line">        <span class="keyword">if</span> rootp == rootq:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.idx[rootp] = rootq</span><br><span class="line">            self.parts -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, p, q)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.root(p) == self.root(q)</span><br></pre></td></tr></table></figure>

<h2 id="Weighted-Quick-Union"><a href="#Weighted-Quick-Union" class="headerlink" title="Weighted Quick Union"></a>Weighted Quick Union</h2><p>Quick Union çš„æ—¶é—´å¤æ‚åº¦é«˜åº¦ä¾èµ–äºæ ‘çš„é«˜åº¦ï¼Œä½†æ˜¯å¯¹æ ‘çš„å¹³è¡¡æ€§å®Œå…¨æ²¡æœ‰æ§åˆ¶ï¼Œä¼šæ— æ¡ä»¶åœ°å°† <code>rq</code> è®¾ç½®ä¸º <code>rp</code> çš„çˆ¶èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œå¦‚æœèƒ½è®©å¹¶æŸ¥é›†çš„æ ‘å½¢ç»“æ„å°½å¯èƒ½å¹³è¡¡ï¼Œæ ‘çš„é«˜åº¦æ•°é‡çº§å°±ä¸ä¼šè¶…è¿‡ $O(log N)$ ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½æ—¶é—´å¤æ‚åº¦ã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¹¶æŸ¥é›†ä¸­å¢åŠ ä¸€ä¸ª <code>size</code> æ•°ç»„ï¼Œè®°å½•æ¯ä¸ªèŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹çš„æ•°é‡æ€»å’Œï¼Œè¿™æ ·å½“åˆå¹¶ä¸¤æ£µæ ‘æ—¶ï¼Œåªéœ€è¦æ¯”è¾ƒä¸¤ä¸ªæ ¹ç»“ç‚¹çš„ <code>size</code> å€¼ï¼Œå°†å°ºå¯¸è¾ƒå°æ ‘çš„æ ¹ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹æŒ‡å‘å°ºå¯¸è¾ƒå¤§æ ‘çš„æ ¹ç»“ç‚¹ï¼Œå°±å¯ä»¥å°½é‡ä¿æŒæ ‘çš„å¹³è¡¡æ€§äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">weightedQuickUnion</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        self.nodes = n</span><br><span class="line">        self.idx = list(range(n))</span><br><span class="line">        self.size = [<span class="number">1</span>] * n</span><br><span class="line">        self.parts = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">root</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> node != self.idx[node]:</span><br><span class="line">            node = self.idx[node]</span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span><span class="params">(self, edge)</span>:</span></span><br><span class="line">        p, q = edge[<span class="number">0</span>], edge[<span class="number">1</span>]</span><br><span class="line">        rootp, rootq = self.root(p), self.root(q)</span><br><span class="line">        <span class="keyword">if</span> rootp == rootq:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">elif</span> self.size[rootp] &gt; self.size[rootq]:</span><br><span class="line">            self.idx[rootq] = rootp</span><br><span class="line">            self.size[rootp] += self.size[rootq]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.idx[rootp] = rootq</span><br><span class="line">            self.size[rootq] += self.size[rootp]</span><br><span class="line">        self.parts -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, p, q)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.root(p) == self.root(q)</span><br></pre></td></tr></table></figure>

<h2 id="Weighted-Quick-Union-with-Path-Compression"><a href="#Weighted-Quick-Union-with-Path-Compression" class="headerlink" title="Weighted Quick Union with Path Compression"></a>Weighted Quick Union with Path Compression</h2><p>Weighted Quick Union çš„æ•ˆæœå·²ç»å¾ˆå¥½äº†ï¼Œä½†æ˜¯å¹¶æŸ¥é›†çš„æ½œåŠ›è¿˜æ²¡æœ‰å®Œå…¨å‘æ˜å‡ºæ¥ï¼šæ—¢ç„¶æ¯æ¬¡è¿è¡Œ <code>root</code> æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šæ‰¾åˆ°æ ¹ç»“ç‚¹ï¼Œé‚£ä½•ä¸ç›´æ¥å°†é€”ä¸­æ‰¾åˆ°çš„æ‰€æœ‰èŠ‚ç‚¹ç›´æ¥æŒ‡å‘è¯¥æ ¹ç»“ç‚¹å‘¢ï¼Ÿè¿™æ ·åšçš„ä»£ä»·æ˜¯ï¼šç”±äº <code>root</code> æ–¹æ³•ä¼šç»å¸¸è¢«è°ƒç”¨ï¼Œé¢‘ç¹åœ°ç”Ÿæˆå’Œé”€æ¯ä¸­é—´èŠ‚ç‚¹æ•°ç»„å¸¦æ¥çš„æˆæœ¬ä¼šå¾ˆé«˜ã€‚å› æ­¤æˆ‘ä»¬é‡‡ç”¨ä¸€ç§å¼€é”€æ›´ä½ï¼Œä½†æ˜¯æ•ˆæœæ¥è¿‘çš„è·¯å¾„å‹ç¼©åšæ³•ï¼šåœ¨å¯»æ‰¾æ ¹ç»“ç‚¹æ—¶ï¼Œå°†æ‰€æœ‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ¢æˆå…¶ç¥–çˆ¶èŠ‚ç‚¹ï¼Œè¿™æ ·æ¯æ¬¡æ‰§è¡Œ <code>root</code> æ—¶ï¼Œè·¯å¾„çš„é•¿åº¦éƒ½ä¼šè¢«å‹ç¼©ä¸€æ¬¡ï¼Œé¢å¤–çš„å†…å­˜å¼€é”€ä¸ºå¸¸æ•°ï¼Œå¹¶ä¸”é¢å¤–çš„ä»£ç åªæœ‰ä¸€è¡Œã€‚æˆ‘ä»¬åªéœ€è¦æŠŠ <code>root</code> ç¨ä½œä¿®æ”¹å³å¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">root</span><span class="params">(self, node)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> node != self.idx[node]:</span><br><span class="line">        <span class="comment"># å°†ç¥–çˆ¶èŠ‚ç‚¹å˜æˆçˆ¶èŠ‚ç‚¹</span></span><br><span class="line">        self.idx[node] = self.idx[self.idx[node]] </span><br><span class="line">        node = self.idx[node]</span><br><span class="line">    <span class="keyword">return</span> node</span><br></pre></td></tr></table></figure>

<p>ç»è¿‡ç®€å•çš„ä¿®æ”¹ï¼Œå¸¦æ¥çš„æ€§èƒ½æå‡æ˜¯æƒŠäººçš„ï¼Œç»è¿‡è·¯å¾„å‹ç¼©ä¹‹åï¼Œ<code>union</code> å’Œ <code>find</code> å¤æ‚åº¦çš„ä¸€ä¸ªæ¯”è¾ƒå®½æ¾çš„ä¸Šç•Œæ˜¯ $O(log ^* N)$ ï¼Œå³<a href="https://en.wikipedia.org/wiki/Iterated_logarithm" target="_blank" rel="noopener" title="Iterated logarithm">è¿­ä»£å¯¹æ•°</a>ï¼Œå…¶å®šä¹‰ä¸ºå¯¹ $N$ åå¤è¿›è¡Œå¯¹æ•°æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ªå°äº 1 çš„ç»“æœæ‰€éœ€è¿›è¡Œçš„å¯¹æ•°è¿ç®—æ¬¡æ•°ï¼Œå¦ä¸€ä¸ªæ›´ç´§å‡‘çš„ä¸Šç•Œæ˜¯ $O(\alpha(N))$ å³<a href="https://en.wikipedia.org/wiki/Ackermann_function#Inverse" target="_blank" rel="noopener" title="Inverse Ackermann Function">åé˜¿å…‹æ›¼å‡½æ•° </a>ã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„å¢é•¿é€Ÿåº¦éƒ½æä¸ºç¼“æ…¢ï¼Œå¯¹äºæˆ‘ä»¬é€šå¸¸èƒ½è§åˆ°çš„æ•°é‡çº§çš„è¾“å…¥ï¼Œå¯ä»¥è®¤ä¸ºè¿™ä¸¤ä¸ªå‡½æ•°çš„å€¼ä¸ä¼šè¶…è¿‡ 5 ï¼Œå¦‚ $log ^* 2^{65536}=5 $ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»è¿‡è·¯å¾„å‹ç¼©çš„å¹¶æŸ¥é›†ï¼Œå¯ä»¥åšåˆ°åœ¨éå¸¸æ¥è¿‘å¸¸æ•°å¤æ‚åº¦çš„é€Ÿåº¦ä¸‹å®ç° <code>union</code> å’Œ <code>find</code> ã€‚</p>
<h2 id="å¤æ‚åº¦åˆ—è¡¨"><a href="#å¤æ‚åº¦åˆ—è¡¨" class="headerlink" title="å¤æ‚åº¦åˆ—è¡¨"></a>å¤æ‚åº¦åˆ—è¡¨</h2><table>
<thead>
<tr>
<th align="center">Algorithm</th>
<th align="center">Constructor</th>
<th align="center">Union</th>
<th align="center">Find</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Quick Find</td>
<td align="center">$O(N)$</td>
<td align="center">$O(N)$</td>
<td align="center">$O(1)$</td>
</tr>
<tr>
<td align="center">Quick Union</td>
<td align="center">$O(N)$</td>
<td align="center">$O(h)$*</td>
<td align="center">$O(h)$</td>
</tr>
<tr>
<td align="center">Weighted Quick Union</td>
<td align="center">$O(N)$</td>
<td align="center">$O(log N)$</td>
<td align="center">$O(log N)$</td>
</tr>
<tr>
<td align="center">Weighted Quick Union with Path Compression</td>
<td align="center">$O(N)$</td>
<td align="center">$O(\alpha(N))$</td>
<td align="center">$O(\alpha(N))$</td>
</tr>
<tr>
<td align="center">* $h$ æ˜¯æ ‘çš„é«˜åº¦</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://algs4.cs.princeton.edu/15uf/" target="_blank" rel="noopener" title="Case Study">Case Study in Algorithms by Robert Sedgewick</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2018/01/01/Leetcode-010-Regular-Expression-Matching/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/01/Leetcode-010-Regular-Expression-Matching/" class="post-title-link" itemprop="url">Leetcode 010 Regular Expression Matching</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-01 22:55:53" itemprop="dateCreated datePublished" datetime="2018-01-01T22:55:53-05:00">2018-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-06 23:37:08" itemprop="dateModified" datetime="2020-01-06T23:37:08-05:00">2020-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é¢˜ç›®è¦æ±‚ï¼š"><a href="#é¢˜ç›®è¦æ±‚ï¼š" class="headerlink" title="é¢˜ç›®è¦æ±‚ï¼š"></a><a href="https://leetcode.com/problems/regular-expression-matching/description/" target="_blank" rel="noopener" title="Regular Expression Matching">é¢˜ç›®è¦æ±‚</a>ï¼š</h2><p>é€šè¿‡ç¨‹åºæ£€æµ‹åªåŒ…å« <code>.</code> å’Œ <code>*</code> çš„<a href="https://en.wikipedia.org/wiki/Regular_expression" target="_blank" rel="noopener" title="Regular Expression">æ­£åˆ™è¡¨è¾¾å¼</a> <code>p</code>ä¸è¾“å…¥çš„å­—ç¬¦ä¸² <code>s</code> æ˜¯å¦åŒ¹é…ã€‚</p>
<ul>
<li><code>.</code> å¯ä»¥å¯ä»¥åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»æ„å­—ç¬¦</li>
<li><code>*</code> å¯ä»¥åŒ¹é… <code>*</code> ä¹‹å‰çš„å­—ç¬¦é‡å¤é›¶æ¬¡æˆ–ä»»æ„å¤šæ¬¡</li>
</ul>
<p>å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">isMatch(<span class="string">"aa"</span>,<span class="string">"a"</span>) = <span class="literal">False</span></span><br><span class="line">isMatch(<span class="string">"aa"</span>,<span class="string">"aa"</span>) = <span class="literal">True</span></span><br><span class="line">isMatch(<span class="string">"aaa"</span>,<span class="string">"aa"</span>) = <span class="literal">False</span></span><br><span class="line">isMatch(<span class="string">"aa"</span>, <span class="string">"a*"</span>) = <span class="literal">True</span></span><br><span class="line">isMatch(<span class="string">"aa"</span>, <span class="string">".*"</span>) = <span class="literal">True</span></span><br><span class="line">isMatch(<span class="string">"ab"</span>, <span class="string">".*"</span>) = <span class="literal">True</span></span><br><span class="line">isMatch(<span class="string">"aab"</span>, <span class="string">"c*a*b"</span>) = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><p>æ€»ä½“æ¥è¯´ï¼Œè¿™æ˜¯ä¸€é“ç›¸å½“éš¾çš„é¢˜ç›®ï¼Œéš¾ç‚¹æ˜¯å¯¹äº <code>*</code> çš„å¤„ç†ã€‚æ ¹æ®ç½‘ä¸Šçš„æ•´ç†ï¼Œæ­¤é¢˜å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’å’Œé€’å½’æ³•è§£å†³ã€‚</p>
<h3 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h3><p>åŠ¨æ€è§„åˆ’çš„ç»†èŠ‚åœ¨ <a href="/2017/12/06/Discrete-Optimization-Note-1-Knapsack/" title="Discrete Optimization å­¦ä¹ ç¬”è®° (1) èƒŒåŒ…é—®é¢˜">Discrete Optimization å­¦ä¹ ç¬”è®° (1) èƒŒåŒ…é—®é¢˜</a> è¿™ç¯‡æ–‡ç« é‡Œå·²ç»åšäº†ç®€å•çš„ä»‹ç»ã€‚åœ¨è¿™é“é¢˜ä¸­ï¼Œç”±äºæ˜Ÿå·çš„ç‰¹æ€§ï¼Œä¸€ä¸ªè¡¨è¾¾å¼å¯ä»¥åŒ¹é…å¤šç§é•¿åº¦ä¸åŒçš„å­—ç¬¦ä¸²ï¼Œå› æ­¤æˆ‘ä»¬åŒæ ·éœ€è¦ä¸€ä¸ªäºŒç»´çš„åŠ¨æ€è§„åˆ’å¸ƒå°”æ•°ç»„ã€‚å…¶ä¸­ï¼Œ <code>dp[i][j]</code> ä¸ºçœŸè¡¨ç¤º <code>s[0:i]</code> å’Œ <code>p[0:j]</code> å¯ä»¥åŒ¹é…ï¼Œä¸ºå‡åˆ™ä¸èƒ½åŒ¹é…ã€‚</p>
<p>å¯¹äºåªæœ‰å­—ç¬¦å’Œ <code>.</code> çš„æƒ…å†µï¼ŒéªŒè¯åŒ¹é…éå¸¸ç®€å•ï¼Œç›´æ¥é€ä¸ªå­—ç¬¦åˆ¤æ–­å³å¯ï¼Œéš¾ç‚¹åœ¨äºå¯¹äºæ˜Ÿå·çš„å¤„ç†ã€‚</p>
<p>ä»¥ <code>isMatch(&quot;aab&quot;, &quot;c*a*b&quot;)</code> ä¸ºä¾‹ï¼Œ <code>dp</code> æ˜¯ä¸€ä¸ª4è¡Œ6åˆ—çš„äºŒç»´æ•°ç»„ï¼Œåˆå§‹åŒ– <code>dp[0][0]=True</code> è¡¨ç¤ºç©ºå­—ç¬¦ä¸²å¯ä»¥å’Œç©ºè¡¨è¾¾å¼åŒ¹é…ã€‚åœ¨å¾ªç¯æ—¶ï¼Œå†…å¾ªç¯ä¸º <code>j</code> å¤–å¾ªç¯ä¸º <code>i</code> ã€‚</p>
<p>æ¯æ¬¡å¾ªç¯æ—¶ï¼Œå¦‚æœä¸æ¶‰åŠåˆ°æ˜Ÿå·ï¼Œåˆ™åªéœ€è€ƒè™‘ <code>s[i - 1] == p[j - 1] or p[j - 1] == &#39;.&#39;</code> æ˜¯å¦æˆç«‹ï¼Œæˆç«‹åˆ™ä»¤ <code>dp[i][j] = dp[i - 1][j - 1]</code>ã€‚</p>
<p>å¦‚æœå½“å‰å­—ç¬¦ä¸º <code>*</code>ï¼Œåˆ™å…ˆä½¿ <code>dp[i][j] = dp[i][j - 2]</code> ï¼Œå³è®© <code>s[0:i]</code> å»åŒ¹é…å½“å‰æ˜Ÿå·å‡ºç°ä¹‹å‰çš„è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´è®©è¯¥ <code>*</code> ä¹‹å‰çš„å­—ç¬¦å‡ºç°ä¸€æ¬¡ï¼›å¦å¤–å¦‚æœ <code>p[j - 1] == s[i - 1]</code> æˆ–è€… <code>p[j - 1] == .</code> åˆ™è¯´æ˜åœ¨ <code>a*</code> æˆ– <code>.*</code> ä¹‹å‰çš„å­—ç¬¦å’Œ <code>s</code> å½“å‰ä½ç½®å­—ç¬¦ç›¸åŒï¼Œå¯ä»¥å°è¯•è®© <code>*</code> ä¹‹å‰çš„å­—ç¬¦å‡ºç°é›¶æ¬¡å†åŒ¹é…ä¸€æ¬¡ï¼Œå³ <code>dp[i][j] |= dp[i - 1][j]</code> </p>
<p>æœ€åå¾—åˆ°çš„åŠ¨æ€è§„åˆ’æ•°ç»„ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">True</span>, <span class="literal">False</span>]</span><br><span class="line">[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">True</span>, <span class="literal">True</span>, <span class="literal">False</span>]</span><br><span class="line">[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">True</span>, <span class="literal">False</span>]</span><br><span class="line">[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">True</span>]]</span><br></pre></td></tr></table></figure>
<p>å– <code>dp[-1][-1]</code> ï¼Œä¸ºçœŸï¼ŒåŒ¹é…æˆåŠŸã€‚</p>
<p>ä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isMatch</span><span class="params">(self, s, p)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type s: str</span></span><br><span class="line"><span class="string">        :type p: str</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        dp = [[<span class="literal">False</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(len(p) + <span class="number">1</span>)] <span class="keyword">for</span> j <span class="keyword">in</span> range(len(s) + <span class="number">1</span>)]</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, len(p) + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> p[j - <span class="number">1</span>] == <span class="string">'*'</span>:</span><br><span class="line">                dp[<span class="number">0</span>][j] = dp[<span class="number">0</span>][j - <span class="number">2</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(s) + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, len(p) + <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> p[j - <span class="number">1</span>] == <span class="string">'*'</span>:</span><br><span class="line">                    dp[i][j] = dp[i][j - <span class="number">2</span>]</span><br><span class="line">                    <span class="keyword">if</span> s[i - <span class="number">1</span>] == p[j - <span class="number">2</span>] <span class="keyword">or</span> p[j - <span class="number">2</span>] == <span class="string">'.'</span>:</span><br><span class="line">                        dp[i][j] |= dp[i - <span class="number">1</span>][j]</span><br><span class="line">                <span class="keyword">elif</span> p[j - <span class="number">1</span>] == s[i - <span class="number">1</span>] <span class="keyword">or</span> p[j - <span class="number">1</span>] == <span class="string">'.'</span>:</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>

<h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><p>é€’å½’åªéœ€è¦ä»å‰å‘åä¸æ–­æ£€æŸ¥å­—å½“å‰ä½ç½®çš„å­—ç¬¦ä»¥åŠä¹‹åçš„å°¾éƒ¨å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ï¼Œæœ€ç»ˆè¿”å›çœŸå‡å³å¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isMatch</span><span class="params">(self, s, p)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type s: str</span></span><br><span class="line"><span class="string">        :type p: str</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> len(p) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> len(s) == <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> len(p) == <span class="number">1</span> <span class="keyword">or</span> p[<span class="number">1</span>] != <span class="string">'*'</span>:</span><br><span class="line">            <span class="keyword">if</span> len(s) == <span class="number">0</span> <span class="keyword">or</span> (s[<span class="number">0</span>] != p[<span class="number">0</span>] <span class="keyword">and</span> p[<span class="number">0</span>] != <span class="string">'.'</span>):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> self.isMatch(s[<span class="number">1</span>:], p[<span class="number">1</span>:])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            i = <span class="number">-1</span></span><br><span class="line">            <span class="keyword">while</span> i &lt; len(s) <span class="keyword">and</span> (i &lt; <span class="number">0</span> <span class="keyword">or</span> p[<span class="number">0</span>] == <span class="string">'.'</span> <span class="keyword">or</span> p[<span class="number">0</span>] == s[i]):</span><br><span class="line">                <span class="keyword">if</span> self.isMatch(s[i+<span class="number">1</span>:], p[<span class="number">2</span>:]):</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h2><ol>
<li><a href="http://blog.csdn.net/magicbean2/article/details/53563571" target="_blank" rel="noopener" title="è§£é¢˜æŠ¥å‘Š">Regular Expression Matching è§£é¢˜æŠ¥å‘Š</a></li>
<li><a href="https://lefttree.gitbooks.io/leetcode-categories/DP/regularExpressionMatch.html" target="_blank" rel="noopener" title="åˆ†ç±»æ€»ç»“">Leetcode åˆ†ç±»æ€»ç»“ Regular Expression Matching</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://jixinfeng.github.io/2017/12/15/Leetcode-031-Next-Permutation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jx.f">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸œç½—è°·ä¹¡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/15/Leetcode-031-Next-Permutation/" class="post-title-link" itemprop="url">Leetcode 031 Next Permutation</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-15 22:48:44" itemprop="dateCreated datePublished" datetime="2017-12-15T22:48:44-05:00">2017-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-06 23:37:08" itemprop="dateModified" datetime="2020-01-06T23:37:08-05:00">2020-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="é¢˜ç›®è¦æ±‚ï¼š"><a href="#é¢˜ç›®è¦æ±‚ï¼š" class="headerlink" title="é¢˜ç›®è¦æ±‚ï¼š"></a><a href="https://leetcode.com/problems/next-permutation/description/" target="_blank" rel="noopener" title="Next Permutation">é¢˜ç›®è¦æ±‚</a>ï¼š</h2><p>ç»™å‡º n ä¸ªæ•°å­—ç»„æˆçš„æ’åˆ— <code>nums</code> ï¼Œæ±‚å‡ºæŒ‰ç…§å­—å…¸é¡ºåºçš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚</p>
<h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><p>è§£å†³æ­¤é¢˜éœ€è¦æœç´¢ä¸‰ä¸ªä½ç½®ï¼Œå…ˆç”¨ä¸¤ä¸ªå˜é‡ <code>i-1</code> å’Œ <code>i</code> ä»åå‘å‰æœç´¢ï¼Œç›´è‡³æ‰¾åˆ°æ»¡è¶³ <code>nums[i-1] &lt; nums[i]</code> çš„æƒ…å†µï¼›ä¹‹åå†ç”¨ <code>j</code> ä»åå‘å‰æœç´¢ï¼Œç›´åˆ°å‡ºç° <code>nums[j] &gt; nums[i-1]</code> ã€‚ä¹‹åè°ƒæ¢ <code>nums[i-1]</code> å’Œ <code>nums[j]</code> å¯¹è°ƒï¼Œå†å°† <code>nums[i]</code> ä¹‹åçš„æ‰€æœ‰å…ƒç´ å€’åºæ’åˆ—ï¼Œå³å¯å¾—åˆ° <code>nextPermutation()</code> å³ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nextPermutation</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: void Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        l = len(nums)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> reversed(range(l)):</span><br><span class="line">            <span class="keyword">if</span> nums[i - <span class="number">1</span>] &lt; nums[i]:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> reversed(range(l)):</span><br><span class="line">                <span class="keyword">if</span> nums[j] &gt; nums[i - <span class="number">1</span>]:</span><br><span class="line">                    nums[i - <span class="number">1</span>], nums[j] = nums[j], nums[i - <span class="number">1</span>]</span><br><span class="line">                    nums[i:] = nums[i:][::<span class="number">-1</span>]</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            nums[:] = nums[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">jx.f</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jx.f</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme â€“ <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
